<?php
 trait api { public $userinfo; private function _gpc($field) { goto mH3nD; fwNnc: IF84Z: goto h0CHd; mH3nD: global $_GPC; goto fBxqN; JRREX: if ($_GPC[$field]) { goto iB8Xf; } goto KLQ4_; KLQ4_: return $this->result(1, "\xe7\xbc\272\xe5\xb0\221\345\277\x85\xe5\241\253\345\x8f\202\346\225\xb0"); goto YJiX0; dSFfc: iB8Xf: goto sTa6R; YJiX0: goto IF84Z; goto dSFfc; Kp1mH: $_GPC[$field] = intval($_GPC[$field]); goto Sv23V; sTa6R: return trim($_GPC[$field]); goto fwNnc; fBxqN: if (!in_array($field, array("\151\144", "\x75\163\x65\x72\x69\144", "\x77\x78\x61\x70\160\x69\x64", "\165\156\151\x61\x63\151\x64"))) { goto NhFFo; } goto Kp1mH; Sv23V: NhFFo: goto JRREX; h0CHd: } public function doConfig() { goto tx7Qw; p3Gql: $platform = pdo_get("\x62\x61\151\142\141\x6e\x5f\x77\170\154\151\x6e\153\163\x5f\x70\154\x61\164\x66\x6f\162\x6d", array("\165\x6e\x69\x61\143\151\x64" => $_W["\x75\x6e\151\x61\x63\151\x64"])); goto vOSpc; fH4J7: $return = array(); goto sW9ys; fRsP8: $return["\143\x6f\x6e\x66\151\147"]["\165\163\145\162\151\x6e\146\x6f"]["\x61\x76\x61\164\141\x72"] = $this->userinfo["\x61\166\x61\x74\141\x72"]; goto bdlwv; T0uKg: goto Vw8UU; goto fPfVN; fPfVN: bcAik: goto PCQlL; oFjRt: $return["\x75\156\151\154\x69\156\153\163"] = array("\344\270\252\344\xba\xba\345\xb0\217\347\xa8\213\xe5\xba\217" => buyCheck("\x67\x72\x78\x63\x78"), "\xe5\xbe\256\xe4\277\241\xe5\x8f\xb7" => buyCheck("\x75\x6e\151\x77\x78\150"), "\345\205\xac\xe4\274\x97\345\217\267" => buyCheck("\165\x6e\x69\147\x7a\150"), "\xe5\xbe\256\344\277\xa1\347\276\xa4" => buyCheck("\165\x6e\x69\167\170\x71"), "\350\xa7\x86\351\xa2\221\xe5\x8f\267" => buyCheck("\x75\x6e\x69\x73\160\150"), "\344\274\x81\344\270\x9a\345\276\256\344\277\xa1" => buyCheck("\x75\x6e\151\x71\x79\x77\x78"), "\xe5\x85\254\344\xbc\227\xe5\x8f\xb7\346\x96\207\xe7\xab\xa0" => buyCheck("\x75\x6e\x69\x67\172\150\167\172")); goto tV6Ad; sW9ys: $return["\143\x6f\156\146\x69\147"] = $this->module["\143\x6f\x6e\146\151\x67"]; goto QpGfo; bdlwv: return $this->result(0, "\350\216\xb7\xe5\217\226\345\237\272\346\234\xac\xe9\205\215\xe7\275\xae", $return); goto rlFQj; vOSpc: if ($platform && $platform["\143\x6f\x6d\x70\157\x6e\x65\156\164\x5f\166\145\162\x69\x66\x79\x5f\164\x69\x63\153\x65\x74"]) { goto CL5XO; } goto wDeLC; wDeLC: $return["\x63\157\x6e\x66\x69\x67"]["\157\x6e\x65\x6b\x65\171"] = false; goto Ol8Lb; sRwIc: c2L3n: goto uE3_O; tx7Qw: global $_GPC, $_W; goto fH4J7; GwLta: $return["\x63\157\x6e\146\151\147"]["\157\156\145\153\145\x79"] = true; goto sRwIc; sKBfR: CL5XO: goto GwLta; grJwL: gDy_q: goto gRx3T; gRx3T: Vw8UU: goto A0XpF; PCQlL: foreach ($return["\x63\x6f\x6e\146\x69\x67"]["\x62\141\156\x6e\145\162\x73"] as $key => $banner) { $return["\x63\157\156\x66\x69\x67"]["\142\141\156\156\145\162\163"][$key]["\151\155\141\x67\145"] = attachment_url($banner["\151\x6d\x61\x67\145"]); WXUq3: } goto grJwL; tV6Ad: $return["\143\157\x6e\146\x69\x67"]["\165\x73\x65\x72\x69\156\x66\x6f"]["\x6e\x69\143\153\x6e\141\155\145"] = $this->userinfo["\156\x69\x63\x6b\x6e\141\155\145"]; goto fRsP8; uE3_O: if ($return["\x63\x6f\156\x66\x69\147"]["\x62\141\x6e\x6e\145\x72\163"]) { goto bcAik; } goto DByds; qL2m7: $return["\143\x6f\156\146\x69\x67"]["\x76\145\162\163\151\x6f\x6e"] = $_W["\143\x75\x72\162\x65\x6e\x74\137\x6d\157\x64\165\154\x65"]["\x76\145\162\163\x69\157\156"]; goto p3Gql; QpGfo: $return["\x63\x6f\x6e\x66\151\147"]["\x62\x61\156\156\145\162\163"] = pdo_getall("\x62\141\151\x62\x61\156\137\167\170\x6c\x69\156\153\x73\137\142\141\x6e\x6e\x65\x72\x73", array("\165\x6e\151\x61\143\151\144" => $_W["\x75\156\x69\141\x63\x69\x64"]), array("\x69\155\141\x67\145", "\x75\162\154"), '', array("\x77\x65\x69\147\150\40\144\x65\163\x63", "\151\144\x20\x64\145\x73\143")); goto qL2m7; A0XpF: $return["\x63\157\x6e\146\x69\147"]["\x61\160\160\x69\144"] = $_W["\141\x63\x63\157\x75\156\x74"]["\153\145\171"]; goto oFjRt; Ol8Lb: goto c2L3n; goto sKBfR; DByds: $return["\143\x6f\x6e\x66\151\x67"]["\x62\x61\156\x6e\x65\162\163"] = array(array("\x69\x6d\141\147\145" => "\x2f\163\164\141\x74\151\143\57\x69\155\141\147\145\163\57\x62\x61\x6e\156\x65\x72\x2e\x6a\x70\x67", "\165\x72\x6c" => '')); goto T0uKg; rlFQj: } public function doWxappList() { goto tdorC; QxAUA: LL4fp: goto hHeKq; FpcUU: $where["\164\x79\160\145"] = "\345\xb0\x8f\347\250\x8b\xe5\272\x8f"; goto QxAUA; kY83f: foreach ($result as $key => $wxapp) { $result[$key]["\143\x72\145\141\x74\145\x74\151\155\145"] = date("\x59\x2d\155\55\144\40\110\x3a\x69\72\x73", $wxapp["\x63\162\x65\141\164\145\x74\x69\155\x65"]); XloPh: } goto Z6mCr; Fbu1P: if (empty($_GPC["\160\x65\x72\x73\x6f\156\x61\x6c"])) { goto CQpCk; } goto b9BH9; clJ1g: if (!(20 * $page < $total)) { goto HuVL0; } goto uYmZP; nRxQ5: $where = array("\x75\156\151\x61\143\x69\x64" => $_W["\165\156\x69\x61\x63\x69\x64"], "\165\163\x65\x72\151\144" => $this->userinfo["\x69\144"]); goto Fbu1P; ZLZ3V: rD37Q: goto GJUFw; R5Z7Z: $page = max(intval($_GPC["\160\x61\147\x65"]), 1); goto nRxQ5; Z6mCr: OQKc7: goto ZLZ3V; b9BH9: $where["\x74\x79\160\x65"] = "\344\xb8\xaa\344\272\xba\345\xb0\217\347\250\x8b\xe5\272\x8f"; goto TvwU9; dBUX7: HuVL0: goto lvapW; hHeKq: $result = pdo_getslice("\142\x61\x69\142\x61\x6e\x5f\167\170\154\151\156\153\163\137\167\x78\141\160\160\163", $where, array($page, 20), $total, array("\151\x64", "\x6e\x61\x6d\x65", "\x74\x79\x70\x65", "\163\x65\x63\x72\x65\164", "\x61\160\160\151\x64", "\x6c\151\156\153\163", "\143\162\x65\141\164\145\x74\151\x6d\x65"), '', array("\151\x64\40\x64\145\x73\x63")); goto dCfCP; dCfCP: if (!$result) { goto rD37Q; } goto kY83f; lvapW: return $this->result(0, "\350\x8e\267\345\217\x96\345\xb0\217\xe7\xa8\213\345\xba\217\xe5\x88\227\350\xa1\xa8", $return); goto AK0ag; tdorC: global $_GPC, $_W; goto R5Z7Z; TvwU9: goto LL4fp; goto w1rJx; w1rJx: CQpCk: goto FpcUU; GJUFw: $return = ["\154\151\163\x74" => $result, "\155\x6f\x72\145" => false]; goto clJ1g; uYmZP: $return["\155\157\x72\145"] = true; goto dBUX7; AK0ag: } public function doWxappDetail() { goto rIhjK; Ayqi2: UZcSa: goto PeMv_; o5q33: return $this->result(0, "\345\xb0\x8f\347\xa8\x8b\345\xba\x8f\350\xaf\246\346\203\205", $wxapp); goto iS3_9; PeMv_: $wxapp["\x63\162\x65\141\164\x65\164\151\155\145"] = date("\x59\55\155\55\144\40\110\x3a\151\x3a\163", $wxapp["\x63\x72\x65\x61\164\x65\164\151\x6d\x65"]); goto o5q33; vN26f: $wxapp = pdo_get("\x62\141\x69\142\x61\x6e\x5f\167\x78\154\x69\x6e\x6b\163\137\x77\x78\x61\160\x70\x73", array("\151\x64" => $id, "\165\156\151\x61\x63\x69\144" => $_W["\165\156\151\x61\x63\x69\144"], "\x75\163\x65\x72\x69\x64" => $this->userinfo["\151\x64"])); goto QfA6R; rIhjK: global $_GPC, $_W; goto Gd3Ss; Gd3Ss: $id = $this->_gpc("\x69\x64"); goto vN26f; KWQ94: return $this->result(-1, "\xe6\x9c\252\350\x83\275\346\x89\276\xe5\x88\260\xe5\xb0\217\347\250\x8b\345\272\x8f"); goto Ayqi2; QfA6R: if ($wxapp) { goto UZcSa; } goto KWQ94; iS3_9: } public function doUpdateUser() { goto H6G_U; ogOpS: $nickname = $this->_gpc("\x6e\151\143\x6b\x6e\141\x6d\145"); goto bKUMl; bKUMl: if ($avatar && $nickname) { goto OZIz7; } goto MpsES; HB67C: $avatar = $this->_gpc("\x61\x76\141\164\x61\x72"); goto ogOpS; MpsES: return $this->result(1, "\xe6\227\240\346\x95\x88\347\x9a\x84\xe4\277\241\xe6\201\257"); goto vBFqF; qLiUA: $this->userinfo["\141\166\x61\164\141\162"] = $avatar; goto GPPKC; vBFqF: goto EeXyp; goto cRFvw; cRFvw: OZIz7: goto JlXgE; GPPKC: return $this->result(0, "\xe4\274\232\xe5\x91\230\344\277\xa1\xe6\x81\257\346\x9b\xb4\xe6\x96\xb0\xe6\x88\220\345\x8a\x9f"); goto F0MpM; EFY3t: $this->userinfo["\x6e\151\x63\x6b\x6e\x61\155\x65"] = $nickname; goto qLiUA; H6G_U: global $_W, $_GPC; goto HB67C; F0MpM: EeXyp: goto dTrwT; JlXgE: pdo_update("\x62\141\x69\x62\x61\156\x5f\167\170\x6c\x69\156\153\x73\137\x75\x73\145\162\x73", ["\156\151\143\153\156\x61\x6d\145" => $nickname, "\x61\166\141\164\x61\x72" => $avatar], ["\x69\144" => $this->userinfo["\x69\144"]]); goto EFY3t; dTrwT: } public function doWxappCreate() { goto BH43z; PQ_80: NnS7T: goto ELuw2; V9sd_: pdo_update("\142\141\151\142\141\x6e\x5f\167\170\x6c\151\x6e\153\x73\137\x77\170\141\x70\160\163", $data, array("\151\144" => $id, "\x75\x6e\x69\141\x63\x69\144" => $_W["\165\x6e\151\141\x63\x69\x64"], "\x75\x73\x65\x72\x69\144" => $this->userinfo["\151\x64"])); goto u5R41; McjWB: $wxappid = pdo_insertid(); goto WUDAq; w_aoj: if ($_GPC["\x6f\x6e\145\153\x65\x79"]) { goto KwniF; } goto AuEyB; hTTCD: $data["\x75\156\x69\x61\143\151\x64"] = $_W["\165\156\x69\141\x63\x69\x64"]; goto gnzKh; WNjyw: $data["\x63\162\x65\x61\164\x65\164\x69\155\x65"] = $data["\165\x70\144\141\164\x65\x74\x69\x6d\145"] = time(); goto Y2IIA; H0FPx: $data["\x74\171\160\145"] = "\344\xb8\xaa\xe4\xba\272\xe5\xb0\x8f\xe7\xa8\x8b\345\xba\x8f"; goto PQ_80; CqS1L: if ($_GPC["\160\145\x72\x73\157\x6e\x61\x6c"]) { goto klX32; } goto GLeoo; meBh7: $data["\157\x72\151\x64"] = $this->_gpc("\x6f\162\x69\x64"); goto H0FPx; H9f1w: dFR9a: goto GFXRU; USLS7: if ($id = intval($_GPC["\151\144"])) { goto E25_n; } goto UDAF0; AuEyB: $data["\x61\160\160\151\144"] = $this->_gpc("\141\x70\x70\151\x64"); goto lUizt; Y2IIA: $result = pdo_insert("\142\x61\x69\142\141\x6e\137\x77\x78\x6c\151\x6e\153\x73\137\x77\x78\141\x70\x70\163", $data); goto vTd3H; gnzKh: $data["\x75\163\145\162\151\x64"] = $this->userinfo["\x69\x64"]; goto WNjyw; fYzSL: AHjjF: goto McjWB; qd0D2: $data["\165\160\x64\x61\x74\x65\164\151\x6d\145"] = time(); goto V9sd_; fWx9a: E25_n: goto qd0D2; BH43z: global $_GPC, $_W; goto ZOcWp; nWJg5: klX32: goto meBh7; UDEhg: $data["\x6e\141\x6d\145"] = $this->_gpc("\x6e\x61\155\x65"); goto w_aoj; WmTTW: $data["\x74\171\x70\x65"] = "\345\260\x8f\347\250\x8b\345\xba\x8f"; goto NN0UK; yo7bW: return $this->result(0, "\345\260\x8f\347\250\213\345\xba\217\346\267\xbb\345\212\xa0\345\244\xb1\350\264\xa5"); goto s9QQs; NN0UK: goto NnS7T; goto nWJg5; GLeoo: $data["\163\x65\x63\x72\145\164"] = $this->_gpc("\163\x65\x63\x72\x65\164"); goto MzrxV; kc1w0: A0vHR: goto hTTCD; lUizt: $data["\x73\x65\143\162\145\164"] = trim($_GPC["\x73\x65\x63\x72\x65\164"]); goto CqS1L; L3L8h: return $this->result(-1, "\345\xb0\x8f\xe7\xa8\x8b\345\272\217\xe6\267\273\345\212\240\xe9\207\215\xe5\xa4\x8d"); goto kc1w0; fCH1F: Jm00T: goto u0ZtK; s9QQs: goto dFR9a; goto fYzSL; WUDAq: pdo_update("\142\x61\151\x62\x61\x6e\137\x77\170\154\151\156\x6b\x73\x5f\x75\x73\x65\x72\x73", array("\167\x78\141\160\x70\x73\x20\53\x3d" => 1), array("\151\144" => $this->userinfo["\151\x64"])); goto mvDpa; GFXRU: goto Jm00T; goto fWx9a; MzrxV: $data["\157\x72\x69\144"] = trim($_GPC["\157\x72\x69\144"]); goto WmTTW; ELuw2: KwniF: goto USLS7; UDAF0: if (!pdo_get("\x62\141\x69\142\x61\156\x5f\x77\x78\x6c\x69\x6e\153\x73\x5f\167\x78\x61\160\x70\163", array("\165\x6e\x69\x61\x63\151\144" => $_W["\165\156\x69\x61\143\x69\144"], "\x75\x73\145\162\151\144" => $this->userinfo["\151\x64"], "\x61\x70\x70\x69\x64" => $_GPC["\141\x70\160\x69\x64"]))) { goto A0vHR; } goto L3L8h; mvDpa: return $this->result(0, "\xe5\260\217\xe7\xa8\213\xe5\272\217\346\267\273\xe5\x8a\240\346\210\220\345\212\237", ["\x77\x78\141\x70\x70\x69\144" => $wxappid]); goto H9f1w; u5R41: return $this->result(0, "\344\xbf\256\xe6\224\271\xe6\210\220\345\x8a\237"); goto fCH1F; ZOcWp: $data = array(); goto UDEhg; vTd3H: if ($result) { goto AHjjF; } goto yo7bW; u0ZtK: } public function doWxappDel() { goto lsHTX; J_9SU: return $this->result(0, "\345\210\240\xe9\231\xa4\346\210\220\xe5\212\x9f"); goto a_YtW; a_YtW: pjIyW: goto WB5p8; TJqXT: pdo_delete("\142\x61\x69\x62\x61\x6e\x5f\167\170\154\151\x6e\153\163\x5f\x77\x78\141\x70\160\163", array("\x69\144" => $id)); goto zDN_Z; zDN_Z: pdo_update("\142\141\x69\142\x61\156\137\167\170\154\x69\x6e\153\x73\x5f\165\163\x65\x72\163", array("\x77\x78\141\160\x70\163\x20\x2d\75" => 1, "\154\151\x6e\153\x73\x20\55\x3d" => $linkCount), array("\151\x64" => $this->userinfo["\151\x64"])); goto GPxxm; lsHTX: global $_W; goto VhTQM; VhTQM: $id = $this->_gpc("\x69\144"); goto D2slH; uW0y0: pdo_delete("\142\x61\151\x62\x61\x6e\x5f\167\170\x6c\x69\x6e\153\163\x5f\x76\151\x73\x69\164", array("\x77\170\x61\x70\160\151\144" => $id)); goto nU3kX; D2slH: if ($wxapp = pdo_get("\142\x61\x69\142\141\x6e\137\167\170\154\x69\x6e\153\163\137\167\170\x61\160\160\x73", array("\151\x64" => $id, "\x75\x6e\x69\x61\143\151\x64" => $_W["\x75\156\x69\141\143\x69\144"], "\165\x73\145\162\151\x64" => $this->userinfo["\151\x64"]))) { goto pjIyW; } goto J_9SU; nU3kX: return $this->result(0, "\345\x88\xa0\xe9\x99\244\346\210\220\345\212\237"); goto Vyh0U; GPxxm: pdo_delete("\142\x61\151\x62\x61\156\x5f\x77\170\154\x69\x6e\153\163\137\x6c\151\x6e\x6b\x73", array("\x77\170\x61\160\160\151\x64" => $id)); goto uW0y0; WB5p8: $linkCount = pdo_fetchcolumn("\123\x45\x4c\105\x43\x54\x20\103\x4f\x55\116\124\50\151\144\x29\40\x46\x52\x4f\115\x20" . tablename("\142\x61\151\x62\x61\156\x5f\167\170\x6c\x69\x6e\x6b\163\x5f\x6c\151\x6e\x6b\163") . "\40\x57\x48\x45\122\105\40\167\170\141\160\x70\x69\x64\x20\75\40\x3a\167\170\x61\160\x70\151\144", array("\x3a\167\x78\141\160\x70\x69\144" => $id)); goto TJqXT; Vyh0U: } public function doLinkList() { goto HLzxb; yrAuF: return $this->result(0, "\xe8\216\267\xe5\217\226\xe9\x93\xbe\346\216\245\xe5\x88\227\350\241\250", $return); goto FoiSE; hdypO: $return["\x63\157\x75\156\x74"] = pdo_fetch("\x53\105\114\x45\x43\124\40\x49\106\x4e\x55\114\114\50\123\x55\x4d\x28\x76\151\145\x77\x73\x29\54\60\x29\40\141\163\x20\x76\x69\x65\167\x73\x2c\x20\143\x6f\x75\156\x74\x28\61\x29\x20\141\163\40\x6c\151\156\x6b\163\x20\x46\122\x4f\x4d\40" . tablename("\x62\141\151\142\141\156\137\167\170\x6c\x69\156\x6b\x73\137\x6c\151\156\x6b\x73") . "\40\127\110\105\122\105\40\x75\163\145\x72\x69\x64\40\75\x20\72\x75\x73\145\x72\151\x64\40\101\116\104\40\164\171\x70\145\40\x3d\x20\x3a\x74\171\x70\145\40\x41\x4e\x44\x20\156\x61\x6d\145\40\x6c\x69\153\145\x20\72\x6e\141\155\145", array("\72\165\163\x65\162\x69\x64" => $this->userinfo["\151\x64"], "\x3a\164\171\160\145" => $where["\164\x79\x70\x65"], "\72\x6e\141\155\145" => "\x25" . $_GPC["\163\137\156\141\x6d\145"] . "\x25")); goto BkEEb; DwuHf: foreach ($result as $key => $link) { goto pqNiK; DEqsP: $result[$key]["\x77\170\x61\x70\x70\156\141\155\145"] = $wxapps[$link["\x77\170\x61\x70\160\151\x64"]]["\x6e\141\x6d\x65"]; goto L38lm; L38lm: K2f6o: goto Ji6WN; pqNiK: if (!$link["\x77\170\141\x70\160\x69\144"]) { goto K2f6o; } goto DEqsP; Ji6WN: DjOlW: goto bUrjM; bUrjM: } goto hODLw; yIumV: $page = max(intval($_GPC["\x70\x61\147\145"]), 1); goto pNqNu; cBZS0: $return = ["\x6c\151\163\x74" => $result, "\155\157\x72\x65" => false]; goto d6waY; opv7x: if (!$result) { goto Dhw4L; } goto Pt8TU; EqgWX: if (!$wxappids) { goto edCmU; } goto jGlEf; lxhBo: $where["\x77\x78\141\x70\x70\151\x64"] = $wxappid; goto RKH3V; BkEEb: XiBIm: goto yrAuF; No49U: if (!$wxappid) { goto qEQRx; } goto lxhBo; hODLw: x8pt2: goto hxSLy; jGlEf: $wxappids = implode("\54", array_unique($wxappids)); goto U8zc3; FmP42: foreach ($result as $key => $link) { goto HG3lU; SkSPI: $result[$key]["\x65\x78\160\151\162\145\163\164\x61\164\165\x73"] = 2; goto B3P8j; sxbWr: $result[$key]["\143\162\x65\x61\x74\145\x74\151\155\x65"] = date("\131\55\155\x2d\144\x20\x48\x3a\151\x3a\163", $link["\x63\162\x65\141\x74\x65\164\x69\155\x65"]); goto QoiWs; hfbT1: $result[$key]["\145\x78\x70\x69\x72\145\x73\164\141\x74\165\163"] = 0; goto XWpa0; U_3p9: PG4og: goto SkSPI; B3P8j: goto Rd3Hf; goto Gn4pu; ZJkqw: $result[$key]["\x65\x78\160\x69\162\145\163\x74\x61\164\x75\x73"] = 1; goto dLcn3; dLcn3: Rd3Hf: goto sxbWr; ENut0: kucuc: goto NQN2G; WK0tn: $wxappids[] = $link["\167\170\x61\x70\x70\x69\144"]; goto QAeT4; eFgGD: if ($link["\145\x78\x70\x69\x72\145\x74\x69\x6d\x65"] - $now < 86400 * 7) { goto EeBqi; } goto hfbT1; XWpa0: goto Rd3Hf; goto U_3p9; QAeT4: D9dFr: goto ENut0; QoiWs: $result[$key]["\x65\x78\160\x69\162\145\x74\151\x6d\145"] = date("\x59\55\155\55\x64\x20\110\72\151\x3a\x73", $link["\x65\x78\160\x69\162\145\x74\x69\155\145"]); goto nj_O4; Gn4pu: EeBqi: goto ZJkqw; nj_O4: if (!$link["\x77\x78\141\x70\160\x69\x64"]) { goto D9dFr; } goto WK0tn; HG3lU: if ($link["\145\170\x70\x69\x72\x65\x74\151\x6d\145"] < $now) { goto PG4og; } goto eFgGD; NQN2G: } goto lXTOy; XVkxz: $wxappid = intval($_GPC["\x77\x78\x61\x70\160\x69\x64"]); goto dUQ2e; S0lH8: Dhw4L: goto cBZS0; pNqNu: $where = array("\165\x6e\x69\x61\x63\x69\144" => $_W["\165\x6e\151\141\143\151\x64"], "\165\163\x65\x72\151\144" => $this->userinfo["\151\x64"], "\x74\x79\x70\145" => $this->_gpc("\164\171\160\x65")); goto mLPqX; iy2E0: goto rfT3b; goto sMveE; BzZom: $wxapps = array_column($wxapps, NULL, "\x69\144"); goto DwuHf; dUQ2e: rfT3b: goto No49U; mLPqX: if (in_array($where["\164\x79\x70\x65"], array("\345\260\x8f\347\250\213\xe5\xba\x8f", "\xe4\270\xaa\xe4\xba\272\xe5\260\217\xe7\250\x8b\345\xba\217"))) { goto x7Kc9; } goto tD2mR; wH7pb: if (!($page == 1)) { goto XiBIm; } goto hdypO; ddy_Z: $now = time(); goto FmP42; sMveE: x7Kc9: goto XVkxz; hxSLy: edCmU: goto S0lH8; tD2mR: $wxappid = NULL; goto iy2E0; lXTOy: cBrYD: goto EqgWX; d6waY: if (!(20 * $page < $total)) { goto BSEQb; } goto wFgCX; GdA6g: BSEQb: goto wH7pb; Pt8TU: $wxappids = array(); goto ddy_Z; wFgCX: $return["\x6d\x6f\162\x65"] = true; goto GdA6g; RKH3V: qEQRx: goto n9vup; U8zc3: $wxapps = pdo_fetchall("\123\105\x4c\x45\x43\124\40\x69\144\x2c\40\x6e\141\x6d\x65\x20\x46\x52\117\x4d\x20" . tablename("\x62\141\x69\142\141\156\137\x77\170\x6c\x69\156\x6b\163\x5f\x77\170\141\x70\160\x73") . "\x20\127\x48\x45\x52\x45\40\x69\144\x20\x69\156\x20\x28{$wxappids}\x29"); goto BzZom; n9vup: $result = pdo_getslice("\142\x61\x69\x62\141\156\x5f\167\170\154\151\x6e\x6b\163\x5f\x6c\151\156\153\163", $where, array($page, 20), $total, array(), '', array("\x69\x64\40\x64\x65\163\x63")); goto opv7x; HLzxb: global $_GPC, $_W; goto yIumV; FoiSE: } public function doLinkCreate() { goto g4idA; jDbxj: v7CrD: goto PdYpQ; B3ABw: $path = "\x2f\x70\141\x67\x65\x73\57\x69\156\x64\x65\x78\x2f\x75\156\151\x6c\151\x6e\153"; goto QNcVo; YCYZb: $now = time(); goto ckPN7; S_c2k: $data["\x65\x78\160\x69\x72\x65\x74\151\x6d\145"] = $link_expiretime; goto llpCS; P0Gje: fbBnc: goto ywd8P; VOn4k: goto U0e7o; goto XG42v; VJK3u: $data["\143\x72\145\x61\x74\145\x74\151\155\x65"] = $data["\x75\160\144\141\x74\145\164\x69\x6d\x65"] = $now; goto S_c2k; C4RVX: $data["\160\141\x74\x68"] = trim($_GPC["\x70\x61\x74\x68"]); goto UlCqo; UW0TA: efAJM: goto YCYZb; ZPm8q: c0O6K: goto UW0TA; rYPSy: jywgA: goto t2KTc; Vtq2R: return $this->result(302, $sensitive_result["\155\x65\163\163\x61\147\x65"]); goto uzIZC; GTOOC: $access_token = $account_api->getAccessToken(); goto B3ABw; PdYpQ: pdo_update("\142\141\x69\142\x61\x6e\x5f\167\170\154\151\x6e\x6b\x73\137\167\x78\141\160\x70\163", array("\x61\165\164\x68\x6f\162\151\172\x65\x72\137\141\x63\143\145\x73\x73\x5f\x74\157\x6b\145\x6e" => $access_token_data["\141\165\x74\x68\157\x72\151\x7a\145\x72\137\x61\x63\143\x65\163\x73\x5f\x74\157\153\145\x6e"], "\141\165\x74\150\x6f\x72\x69\172\x65\x72\x5f\x72\x65\x66\x72\x65\163\150\137\164\x6f\153\145\156" => $access_token_data["\141\165\x74\x68\157\162\151\172\x65\x72\137\141\143\x63\145\x73\x73\137\x74\157\153\145\x6e"], "\141\165\164\x68\157\x72\x69\x7a\x65\162\137\x65\x78\160\x69\162\145\137\x74\x69\155\x65" => $now + 6000), array("\x69\x64" => $wxapp["\151\144"])); goto pAXxR; QNcVo: $openlink = create_wxacode($access_token, $path, "\x6c\151\156\153\x69\x64\75" . $linkid); goto AvZhJ; Sp03t: xQQ9R: goto a4oFd; pFXj9: $Platform = new Pf($platform); goto lDWJx; AzOnZ: if (!empty($personal)) { goto TOY2m; } goto Zo8tu; g4idA: global $_GPC, $_W; goto STm9f; pudLa: if ($wxapp["\x61\x75\x74\x68\157\x72\151\172\145\162\x5f\x65\x78\160\x69\x72\145\137\164\x69\155\x65"] < $now || !$wxapp["\141\165\x74\150\157\x72\x69\x7a\x65\162\x5f\x61\x63\143\145\163\163\137\164\157\x6b\x65\156"]) { goto Wik9R; } goto ntfpH; llpCS: $result = pdo_insert("\142\141\151\142\141\x6e\137\167\x78\154\151\156\x6b\x73\137\154\151\156\153\163", $data); goto KnvC6; qCxXG: DFDif: goto IXvq_; LNiJt: pdo_update("\x62\141\x69\x62\x61\x6e\137\x77\x78\x6c\151\x6e\153\x73\x5f\167\170\141\160\160\163", array("\154\151\156\x6b\x73\x20\53\75" => 1), array("\151\x64" => $wxapp["\x69\144"])); goto glsyi; OT7To: $access_token = get_access_token($wxapp["\141\x70\160\151\x64"], $wxapp["\163\145\143\x72\x65\x74"]); goto F6QNV; kBopR: if ($this->userinfo["\143\162\145\x61\x74\x65\x74\151\x6d\145"] + $this->module["\x63\157\x6e\x66\151\147"]["\160\162\x65\155\x69\x75\x6d\163"]["\x66\162\145\145\x64\141\x79\x73"] * 86400 > $now) { goto SEC0I; } goto vmUmr; eXyGa: return $this->result(0, "\xe9\x93\xbe\346\x8e\245\345\x88\x9b\345\xbb\272\346\210\220\xe5\212\237", ["\x6c\x69\156\x6b\151\x64" => $linkid]); goto pCg9v; D6uyJ: Ea9n5: goto xwx2r; NZql7: return $this->result(202, "\xe6\202\xa8\345\210\233\xe5\273\xba\xe7\232\204\xe9\x93\xbe\346\x8e\245\346\x95\260\xe5\267\262\350\276\276\344\xb8\x8a\351\231\220"); goto cT9ST; TA4oQ: return $this->result(100, "\xe9\x93\xbe\346\x8e\xa5\345\210\x9b\xe5\273\xba\xe5\xa4\261\xe8\264\245"); goto pIbdW; QeAY4: gdGLu: goto Xmj5U; XeMtF: if (!(buyCheck("\x73\145\156\163\151\x74\x69\x76\145") && !empty($this->module["\143\x6f\x6e\146\x69\x67"]["\163\145\x6e\x73\151\x74\151\x76\145"]["\x74\x65\x78\x74"]))) { goto gdGLu; } goto LezvQ; oedMP: $linkid = pdo_insertid(); goto AqUmx; yPRXx: $result = pdo_insert("\x62\141\151\x62\x61\156\x5f\167\170\154\x69\x6e\x6b\163\x5f\154\151\x6e\x6b\163", $data); goto M2GTy; gn87B: if ($wxapp = pdo_get("\142\x61\x69\x62\x61\156\x5f\x77\x78\x6c\x69\x6e\153\163\137\x77\170\141\x70\x70\163", array("\x69\x64" => $data["\x77\x78\141\x70\x70\151\x64"], "\165\x6e\x69\141\143\x69\144" => $_W["\165\156\151\x61\x63\x69\x64"], "\165\x73\x65\x72\151\144" => $this->userinfo["\151\144"]))) { goto xQQ9R; } goto fmTJn; VFj9q: if (!is_error($openlink)) { goto FYVjq; } goto NwM93; t7dh_: goto cqxjX; goto gZzZW; WJsO4: $account_api = WeAccount::create(); goto GTOOC; EP7Gl: GBI8r: goto LYUyC; UeZMX: $data["\156\141\155\145"] = $this->_gpc("\x6e\x61\155\x65"); goto NqIbV; Y1Clb: TOY2m: goto EFKXr; dgBLx: SEC0I: goto A2PIm; jsGqp: $data["\144\157\x6d\x61\x69\x6e"] = $this->module["\143\x6f\156\146\x69\x67"]["\144\x6f\155\x61\151\156"]; goto C4RVX; cT9ST: GB5Q4: goto m_OXr; R64lS: goto a8UFz; goto hp3d2; qvD__: bNQjk: goto MuSPM; pi7wh: if (!($this->module["\x63\x6f\x6e\x66\151\147"]["\x70\x72\145\155\151\165\155\163"]["\166\x69\x70\x6c\x69\155\x69\x74"] && $this->userinfo["\154\x69\156\153\163"] >= $this->module["\x63\157\156\146\x69\147"]["\160\162\145\x6d\x69\x75\x6d\x73"]["\x76\151\160\x6c\151\x6d\x69\164"])) { goto GB5Q4; } goto NZql7; SGM7b: $data["\157\160\145\156\x6c\151\x6e\x6b"] = $openlink; goto VJK3u; EFKXr: if (($link_expiretime = $this->userinfo["\145\x78\x70\151\x72\145\x74\x69\x6d\145"]) > $now) { goto h3H1P; } goto kBopR; fEm0I: $data["\x62\x74\x6e\x5f\164\151\164\154\x65"] = "\xe8\xbf\233\xe5\x85\xa5\xe5\260\217\xe7\xa8\x8b\xe5\272\x8f"; goto jxjj1; kc0gg: if ($platform) { goto XGtBz; } goto SS10y; CiykA: keEMt: goto w5UJk; zuvqt: X1MoC: goto Ej_RD; AoZGu: $data["\165\x73\x65\x72\x69\x64"] = $this->userinfo["\151\x64"]; goto M7Cta; pCg9v: EXpBh: goto fmEOc; pAXxR: $access_token = $access_token_data["\x61\165\x74\x68\x6f\162\151\172\x65\162\x5f\141\143\143\x65\163\163\137\x74\157\x6b\145\156"]; goto qUnhg; D9xn5: if (!isset($explodes[1])) { goto c0O6K; } goto MTyNL; ZREpE: OpEsM: goto pi7wh; gtt0X: MEpZB: goto JsH67; xBrwZ: if (!is_error($sensitive_result)) { goto pZDu4; } goto Vtq2R; UlCqo: $data["\x61\160\x70\x5f\164\157\160"] = trim($_GPC["\x61\160\x70\137\164\x6f\160"]); goto QEgAh; n6u9_: $data["\144\x6f\155\141\151\x6e"] = $this->module["\143\x6f\x6e\146\x69\x67"]["\x76\x69\x70\144\157\x6d\141\151\x6e"]; goto qvD__; lv74T: if (!$this->module["\x63\x6f\156\x66\151\x67"]["\166\151\160\144\x6f\155\141\151\x6e"]) { goto bNQjk; } goto n6u9_; m_OXr: goto cqxjX; goto dgBLx; l3OCv: pdo_update("\142\x61\x69\142\141\x6e\x5f\167\x78\x6c\x69\156\153\x73\x5f\x77\170\x61\160\160\163", array("\x6c\x69\156\x6b\163\40\53\75" => 1), array("\x69\144" => $wxapp["\151\144"])); goto eXyGa; LtiKU: return $this->result(100, "\351\223\276\xe6\x8e\245\xe5\210\x9b\345\273\272\xe5\244\261\xe8\264\245"); goto Ty3_H; LezvQ: $sensitive_result = sensitiveText(implode('', $data)); goto xBrwZ; hp3d2: Wik9R: goto UvBEO; N6FfZ: if (!is_error($access_token_data)) { goto v7CrD; } goto Nx2kz; vmUmr: return $this->result(200, "\xe6\202\xa8\xe7\232\x84\xe4\275\x93\351\252\x8c\346\x9c\237\345\xb7\262\350\xbf\x87\357\274\214\350\257\267\350\264\255\xe4\xb9\xb0\344\xbc\x9a\345\221\x98\xe5\245\227\xe9\xa4\x90"); goto t7dh_; Nx2kz: return $this->result($access_token_data["\x65\x72\162\x6e\157"], $access_token_data["\155\145\x73\163\141\147\x65"]); goto jDbxj; IXvq_: pdo_update("\142\141\151\142\x61\x6e\x5f\167\170\154\x69\156\153\x73\137\165\x73\x65\162\163", array("\x6c\x69\156\153\x73\40\x2b\75" => 1), array("\151\144" => $this->userinfo["\x69\x64"])); goto LNiJt; e6qaP: cqxjX: goto gn87B; XG42v: gG2ET: goto dC6O5; uzIZC: pZDu4: goto QeAY4; F6QNV: if (!is_error($access_token)) { goto jywgA; } goto Hk57e; AvZhJ: if (!is_error($openlink)) { goto DFDif; } goto rRU3K; MTyNL: $data["\x71\x75\145\162\171"] = $explodes[1]; goto ZPm8q; ckPN7: $link_expiretime = 0; goto TJ9nC; hkAsH: goto U0e7o; goto q2Zvz; kaqTp: $data["\144\x6f\155\x61\x69\x6e"] = $personal["\144\157\x6d\x61\x69\156"]; goto ZREpE; KKooy: $data["\160\141\164\x68"] = "\x2f" . $data["\160\x61\x74\x68"]; goto EP7Gl; MuSPM: if (!$personal["\144\157\x6d\x61\x69\156"]) { goto OpEsM; } goto kaqTp; ywd8P: $link_expiretime = $this->userinfo["\143\162\x65\141\164\x65\164\151\155\145"] + $this->module["\x63\157\x6e\146\x69\x67"]["\x70\162\145\155\x69\x75\x6d\163"]["\146\x72\145\145\x65\x78\x70\151\162\145"] * 86400; goto e6qaP; XGgo1: $data["\165\x6e\x69\x61\x63\x69\x64"] = $_W["\165\156\x69\x61\x63\151\144"]; goto AoZGu; q2Zvz: UcSTb: goto OT7To; Af4ei: $data["\165\x6e\x69\141\143\151\144"] = $_W["\165\156\151\141\x63\x69\x64"]; goto VLFff; Xmj5U: $data["\167\170\141\x70\x70\151\144"] = $this->_gpc("\x77\170\x61\160\x70\x69\x64"); goto jsGqp; NwM93: return $this->result($openlink["\x65\162\x72\x6e\x6f"], $openlink["\x6d\x65\163\163\x61\147\145"]); goto c4pec; fmTJn: return $this->result(-1, "\345\xb0\x8f\347\xa8\213\345\xba\x8f\xe4\xb8\215\345\255\230\345\234\250"); goto Sp03t; sY_1C: wefR2: goto zuvqt; JsH67: uolGC: goto f1_wR; noAK6: $data["\x74\x79\160\145"] = "\345\xb0\217\347\xa8\x8b\345\xba\x8f"; goto SGM7b; BOvk2: if ($wxapp["\164\171\x70\145"] == "\344\xb8\xaa\xe4\272\272\xe5\260\x8f\347\xa8\x8b\345\xba\x8f") { goto gG2ET; } goto G_QGB; B9tEB: $openlink = create_wxacode($access_token, $data["\x70\x61\x74\x68"], $data["\161\165\x65\x72\x79"]); goto VFj9q; TJ9nC: $personal = json_decode($this->userinfo["\143\157\156\x66\151\147"], true); goto AzOnZ; ntfpH: $access_token = $wxapp["\x61\x75\x74\150\x6f\x72\151\x7a\145\162\137\141\143\x63\145\x73\163\137\164\157\153\145\156"]; goto R64lS; UvBEO: if ($wxapp["\141\165\164\x68\x6f\x72\151\x7a\145\162\x5f\162\145\146\x72\145\x73\x68\137\x74\157\153\145\x6e"]) { goto Ea9n5; } goto UEwDI; UEwDI: return $this->result(300, "\346\216\x88\346\x9d\x83\xe4\277\241\xe6\x81\xaf\xe4\xb8\242\345\244\xb1\xef\274\214\350\257\267\351\207\x8d\346\x96\260\344\xb8\x80\xe9\x94\xae\346\216\210\xe6\x9d\203\345\260\217\xe7\250\213\xe5\xba\x8f"); goto D6uyJ; lDWJx: $access_token_data = $Platform->getAccessToken($wxapp["\x61\x70\x70\151\144"], $wxapp["\x61\x75\x74\x68\157\x72\x69\172\x65\x72\137\162\x65\x66\162\145\x73\150\x5f\164\157\153\145\x6e"]); goto N6FfZ; LYUyC: $explodes = explode("\x3f", $data["\x70\141\x74\150"]); goto S88_R; A2PIm: if (!($this->userinfo["\x6c\151\156\x6b\x73"] >= $this->module["\x63\157\156\x66\151\147"]["\160\162\x65\155\151\x75\155\163"]["\146\x72\x65\x65\154\x69\155\x69\x74"])) { goto fbBnc; } goto w4zz9; Ggmph: XGtBz: goto AueVy; c4pec: FYVjq: goto mZX4T; gZzZW: h3H1P: goto lv74T; fmEOc: goto uolGC; goto gtt0X; xwx2r: $platform = pdo_get("\x62\x61\151\x62\141\x6e\x5f\x77\170\x6c\151\156\153\x73\137\x70\154\x61\164\146\157\162\x6d", array("\165\156\151\141\143\x69\144" => $_W["\165\156\151\141\143\x69\144"])); goto kc0gg; VLFff: $data["\x75\x73\x65\162\151\x64"] = $this->userinfo["\151\144"]; goto noAK6; f1_wR: goto X1MoC; goto PxwYp; t2KTc: U0e7o: goto nW2k0; M7Cta: $data["\164\171\160\145"] = "\xe4\xb8\xaa\344\272\272\xe5\260\x8f\xe7\250\x8b\xe5\xba\217"; goto fEm0I; PxwYp: Qt9_i: goto XGgo1; glsyi: pdo_update("\x62\141\151\x62\x61\x6e\137\x77\170\x6c\x69\156\x6b\x73\137\x6c\x69\156\153\x73", array("\157\x70\x65\x6e\x6c\151\156\x6b" => $openlink), array("\x69\x64" => $linkid)); goto O3Ei7; NqIbV: $data["\163\x68\141\162\x65\137\164\151\x74\154\145"] = trim($_GPC["\163\150\141\162\145\137\x74\151\164\154\145"]); goto vXD4B; S88_R: $data["\x70\x61\164\150"] = $explodes[0]; goto D9xn5; M2GTy: if ($result) { goto keEMt; } goto LtiKU; LTjzi: if (!(substr($data["\x70\x61\164\150"], 0, 1) != "\x2f")) { goto GBI8r; } goto KKooy; w4zz9: return $this->result(201, "\xe6\x82\250\345\x88\233\345\273\272\xe7\x9a\204\xe5\x85\x8d\350\xb4\271\351\223\xbe\346\x8e\xa5\xe6\x95\xb0\345\267\xb2\xe8\276\xbe\xe4\270\x8a\351\231\220\357\274\214\350\xaf\xb7\xe8\xb4\xad\344\271\260\xe4\xbc\232\345\221\x98\xe5\xa5\x97\xe9\xa4\x90"); goto P0Gje; AueVy: include MODULE_ROOT . "\x2f\x6c\151\142\57\x70\x66\x2e\160\150\x70"; goto pFXj9; nW2k0: if ($personal_wxapp) { goto Qt9_i; } goto B9tEB; rRU3K: pdo_delete("\x62\x61\x69\142\141\156\137\x77\170\154\151\156\153\x73\137\154\151\x6e\153\x73", array("\151\x64" => $linkid)); goto EmylT; dT4nc: XaDyg: goto oedMP; w5UJk: $linkid = pdo_insertid(); goto WJsO4; bO4vp: $data["\143\x6f\160\171\137\167\x6f\162\x64\x73"] = trim($_GET["\x63\x6f\x70\x79\x5f\x77\x6f\162\144\163"]); goto XeMtF; pcQcm: $data["\x65\x78\x70\151\162\x65\164\x69\155\145"] = $link_expiretime; goto yPRXx; jxjj1: $data["\143\162\x65\141\164\145\164\x69\155\x65"] = $data["\x75\x70\x64\141\164\x65\x74\x69\x6d\x65"] = $now; goto pcQcm; Ty3_H: goto wefR2; goto CiykA; qUnhg: a8UFz: goto VOn4k; dC6O5: $personal_wxapp = true; goto hkAsH; vXD4B: $data["\x61\x70\160\x5f\x74\145\170\164"] = trim($_GPC["\x61\160\160\137\164\x65\x78\x74"]); goto bO4vp; O3Ei7: return $this->result(0, "\xe9\223\xbe\346\x8e\xa5\345\210\233\xe5\xbb\xba\346\210\x90\345\x8a\237", ["\x6c\x69\x6e\x6b\151\x64" => $linkid]); goto sY_1C; STm9f: $data = array(); goto UeZMX; AqUmx: pdo_update("\142\x61\x69\x62\x61\156\137\x77\170\154\151\156\153\163\x5f\x75\163\x65\x72\163", array("\154\x69\156\153\x73\40\53\x3d" => 1), array("\151\144" => $this->userinfo["\x69\x64"])); goto l3OCv; SS10y: return $this->result(301, "\xe5\xbc\x80\xe6\224\276\345\xb9\xb3\345\217\xb0\xe5\x8f\202\xe6\225\xb0\344\xb8\242\345\244\261\357\274\x8c\xe8\xaf\267\xe8\x81\224\347\263\xbb\xe7\xae\241\xe7\220\206\xe5\x91\230"); goto Ggmph; Zo8tu: $personal = array(); goto Y1Clb; pIbdW: goto EXpBh; goto dT4nc; EmylT: return $this->result($openlink["\145\162\x72\x6e\157"], $openlink["\x6d\x65\163\163\141\147\x65"]); goto qCxXG; KnvC6: if ($result) { goto XaDyg; } goto TA4oQ; Hk57e: return $this->result($access_token["\145\162\162\x6e\x6f"], $access_token["\155\x65\x73\163\141\147\x65"]); goto rYPSy; a4oFd: $personal_wxapp = false; goto BOvk2; G_QGB: if ($wxapp["\163\x65\143\162\x65\164"]) { goto UcSTb; } goto pudLa; QEgAh: if (!$data["\x70\141\164\x68"]) { goto efAJM; } goto LTjzi; mZX4T: if ($id = intval($_GPC["\x69\x64"])) { goto MEpZB; } goto Af4ei; Ej_RD: } public function doLinkDetail() { goto lxAsy; XaPCy: if (!$link["\x77\x78\x61\160\160\151\x64"]) { goto eSTkW; } goto MhHnf; bV6Nv: ljhnW: goto XPb8U; czqr1: $link["\145\170\x70\x69\162\145\164\x69\x6d\x65"] = date("\131\x2d\x6d\x2d\x64\x20\110\72\x69\72\x73", $link["\145\170\160\x69\162\145\x74\x69\155\x65"]); goto on4Vz; ANdSy: foreach ($visits as $key => $visit) { goto SNHuX; Le55j: $views = $visit["\166\151\145\x77\x73"]; goto o2IjT; sNpqW: gr44q: goto u0tGC; o2IjT: $arrives = $visit["\141\x72\162\151\166\145\163"]; goto fmT5W; SNHuX: if (!($day == $visit["\x64\x61\164\x65"])) { goto yJ8Ud; } goto Le55j; fmT5W: yJ8Ud: goto sNpqW; u0tGC: } goto bV6Nv; ARkNf: $link["\166\x69\163\151\x74"]["\x63\141\x74\x65\147\x6f\x72\151\145\163"][] = substr($day, 6) . "\xe6\x97\245"; goto g1Syp; r1GS1: pcryZ: goto ryrgi; y5nwa: $i = $now - 6 * 86400; goto r1GS1; iOsPR: $now = time(); goto sf123; p0kZH: l7NrK: goto YwsbR; oqDR1: $link = pdo_get("\x62\x61\151\142\141\x6e\137\167\170\154\151\x6e\x6b\163\x5f\x6c\x69\156\153\163", array("\151\x64" => $id, "\165\156\151\x61\x63\x69\144" => $_W["\165\156\x69\141\x63\151\144"], "\165\163\x65\162\x69\x64" => $this->userinfo["\x69\x64"])); goto rVUXh; ioTlR: $day = date("\131\x6d\144", $i); goto ARkNf; sf123: $link["\154\x69\156\x6b"] = calc_link($link, $this->module["\x63\157\x6e\x66\151\x67"]); goto EEyg0; nS_pO: goto pcryZ; goto urA9y; ryrgi: if (!($i <= $now)) { goto qbybt; } goto ioTlR; G5DEz: return $this->result(0, "\351\x93\276\xe6\216\245\350\257\246\346\203\205", $link); goto z5Xlu; urA9y: qbybt: goto G5DEz; YwsbR: $link["\167\x78\x61\x70\x70"] = $wxapp["\156\141\155\x65"]; goto A5AfC; g1Syp: $views = $arrives = 0; goto ANdSy; rVUXh: if ($link) { goto AU47z; } goto ItP3g; dcV7N: if ($wxapp) { goto l7NrK; } goto sfKSB; MhHnf: $wxapp = pdo_get("\x62\x61\x69\142\141\x6e\x5f\167\170\154\151\156\x6b\x73\137\167\170\141\x70\160\163", array("\151\x64" => $link["\167\170\x61\x70\x70\x69\x64"])); goto dcV7N; on4Vz: $visits = pdo_getall("\142\141\151\142\141\x6e\137\x77\170\154\x69\156\153\163\x5f\166\151\x73\151\x74", array("\165\156\x69\x61\143\151\x64" => $_W["\x75\156\x69\141\x63\151\144"], "\x6c\151\156\153\x69\x64" => $link["\x69\144"], "\144\141\x74\145\40\x3e\x3d" => date("\x59\x6d\x64", $now - 6 * 86400))); goto y5nwa; sfKSB: return $this->result(-1, "\xe6\x9c\xaa\350\203\xbd\xe6\x89\xbe\xe5\x88\260\xe5\xb0\x8f\347\xa8\213\xe5\xba\217"); goto p0kZH; A5AfC: eSTkW: goto iOsPR; tFgwO: $id = $this->_gpc("\x69\144"); goto oqDR1; lxAsy: global $_GPC, $_W; goto tFgwO; QgU0y: AU47z: goto XaPCy; gsDv7: $link["\166\x69\x73\x69\x74"]["\141\x72\162\151\166\145\x73"][] = (int) $arrives; goto SeI5r; SeI5r: t6IlK: goto B3Gw9; XPb8U: $link["\x76\151\163\151\x74"]["\166\x69\x65\167\x73"][] = (int) $views; goto gsDv7; EEyg0: $link["\x71\162\143\157\144\145"] = murl("\145\156\164\162\x79\57\x77\x78\141\x70\160\57\161\x72\x63\157\144\145", ["\x6d" => "\x62\141\151\142\141\x6e\137\167\x78\154\151\x6e\153\x73", "\151\x64" => $id], true, true); goto czqr1; ItP3g: return $this->result(-1, "\346\x9c\xaa\350\x83\275\346\211\xbe\345\210\xb0\351\223\276\xe6\x8e\245"); goto QgU0y; B3Gw9: $i += 86400; goto nS_pO; z5Xlu: } public function doLinkDel() { goto vcAq2; CRTyo: pdo_delete("\x62\x61\151\142\x61\156\137\167\170\x6c\151\156\153\163\137\154\x69\x6e\153\x73", array("\x69\x64" => $id)); goto GRrfF; UDSO1: $id = $this->_gpc("\151\144"); goto jTf6r; jTf6r: if ($link = pdo_get("\142\x61\x69\x62\141\156\137\167\x78\154\151\x6e\x6b\163\137\x6c\151\x6e\153\163", array("\x69\144" => $id, "\165\156\x69\x61\x63\151\144" => $_W["\165\156\151\141\143\151\144"], "\165\x73\145\x72\151\x64" => $this->userinfo["\x69\x64"]))) { goto I5WT_; } goto gK8TJ; GRrfF: pdo_update("\x62\141\x69\142\141\156\137\167\170\x6c\x69\156\x6b\x73\137\x75\x73\x65\x72\163", array("\x6c\151\156\153\163\x20\x2d\x3d" => 1), array("\151\144" => $this->userinfo["\151\x64"])); goto RqRGO; RqRGO: pdo_delete("\x62\x61\151\x62\x61\x6e\137\167\x78\x6c\x69\156\153\163\x5f\x76\x69\163\x69\164", array("\154\151\156\153\x69\144" => $id)); goto CKEVx; gK8TJ: return $this->result(0, "\xe5\x88\240\351\x99\244\xe6\x88\220\345\x8a\x9f"); goto TWc2p; IK_BC: if (!file_exists(ATTACHMENT_ROOT . $link["\x72\145\x74\x75\162\156"])) { goto FmlJu; } goto CwIM0; PDt83: return $this->result(0, "\345\x88\240\351\231\244\xe6\x88\x90\xe5\x8a\x9f"); goto Ytf9L; a5v98: pdo_update("\142\141\x69\x62\x61\156\137\x77\x78\x6c\x69\x6e\153\163\x5f\167\170\x61\x70\160\163", array("\x6c\x69\x6e\153\x73\40\x2d\75" => 1, "\166\151\x65\x77\x73\40\55\75" => $link["\166\151\145\x77\163"]), array("\x69\x64" => $link["\x77\x78\x61\x70\x70\x69\x64"])); goto DmjL0; TWc2p: I5WT_: goto CRTyo; CwIM0: @unlink(ATTACHMENT_ROOT . $link["\x72\x65\164\x75\162\x6e"]); goto Wy46B; vcAq2: global $_GPC, $_W; goto UDSO1; DmjL0: DPInR: goto IK_BC; Wy46B: FmlJu: goto PDt83; CKEVx: if (!$link["\x77\170\141\160\x70\151\144"]) { goto DPInR; } goto a5v98; Ytf9L: } public function doQrcode() { goto qOGhA; tTR5f: $id = $this->_gpc("\151\144"); goto ruWh2; qOGhA: global $_GPC, $_W; goto tTR5f; ruWh2: $link = pdo_get("\x62\141\x69\x62\141\156\137\x77\170\154\151\x6e\153\x73\x5f\154\151\156\x6b\x73", array("\x69\x64" => $id, "\165\x6e\151\x61\143\x69\x64" => $_W["\x75\x6e\151\x61\x63\x69\x64"])); goto O8OJ_; O8OJ_: if ($link) { goto Ttijt; } goto QLopa; ta4aH: Ttijt: goto Gmuql; NevBK: QRcode::png($link["\154\151\156\153"]); goto LZ4bx; Gmuql: $userinfo = pdo_get("\142\141\x69\x62\141\156\x5f\167\x78\x6c\x69\x6e\153\x73\x5f\165\163\x65\162\163", array("\151\144" => $link["\165\163\145\x72\x69\x64"])); goto mvyjA; QLopa: return $this->result(-1, "\346\234\252\xe8\x83\275\xe6\x89\276\345\210\260\xe9\223\276\346\216\245"); goto ta4aH; XE8G3: include MODULE_ROOT . "\57\154\151\142\57\x70\x68\x70\161\162\143\x6f\144\x65\x2e\x70\150\x70"; goto NevBK; mvyjA: $link["\154\151\156\153"] = calc_link($link, $this->module["\x63\157\x6e\146\x69\147"]); goto XE8G3; LZ4bx: } private function newPage() { goto m6o2q; KeNyl: qXVQA: goto sww1h; E06jO: $text = "\351\223\276\346\216\xa5\xe5\267\xb2\350\xbf\207\346\x9c\x9f\xe6\210\x96\xe5\210\240\xe9\231\244"; goto DNt9p; sXI1j: C3KRk: goto J_0RI; jfCFu: if (!(!empty($this->module["\x63\157\x6e\146\x69\x67"]["\145\170\x70\151\x72\145\152\165\155\160"]) && strpos($this->module["\143\157\x6e\146\x69\147"]["\x65\x78\160\x69\162\x65\152\x75\x6d\x70"], "\x68\x74\x74\160") !== false)) { goto UzlDC; } goto NQJTd; Mz2Nf: $text = "\350\257\xb7\344\275\xbf\xe7\x94\250\xe5\276\xae\xe4\xbf\xa1\346\x89\xab\xe6\x8f\x8f\344\xba\x8c\xe7\273\xb4\347\xa0\x81"; goto daD0V; oy2nL: include $this->template("\160\143\160\x61\x67\145"); goto PZIfk; vqx5X: oeUpn: goto w6h2_; sww1h: include $this->template("\x77\x78\x70\141\147\145"); goto sU4Mk; vleqU: goto VDfHl; goto r6Mk6; vuvJ2: pdo_update("\x62\141\151\x62\141\156\x5f\x77\x78\154\151\x6e\153\163\137\154\x69\156\153\163", array("\141\x72\162\151\x76\145\x73\40\x2b\75" => 1), array("\151\144" => $id)); goto EpUo7; yIiYC: uE7Fk: goto ubezA; wZiL7: if ($wxapp["\x6f\162\x69\x64"]) { goto oeUpn; } goto GNsfh; Y879k: $path .= "\77" . $link["\x71\165\x65\x72\x79"]; goto rKSFN; dzTvh: pdo_update("\142\141\151\142\141\x6e\137\167\170\154\151\x6e\153\163\137\x6c\x69\156\x6b\x73", array("\x76\x69\145\167\x73" => $link["\166\x69\145\167\163"] + 1), array("\151\144" => $id)); goto iwd8z; E3mpS: OHvhB: goto BuG0Q; gO5bh: $qrcode = local_attachment_url($link["\162\145\x74\x75\162\x6e"]); goto f_T_1; R0RgU: header("\114\157\143\141\164\x69\157\156\72\40" . $link["\162\x65\164\165\x72\x6e"]); goto bKK7g; k3YOr: $_W["\x61\164\x74\x61\143\150\165\x72\154\x5f\154\x6f\143\x61\x6c"] = str_replace("\57\163\57", "\57", $_W["\141\164\164\141\x63\x68\165\162\x6c\x5f\154\x6f\x63\x61\154"]); goto El6ZS; EBdpm: $account_api = WeAccount::create($this->module["\143\x6f\x6e\146\x69\147"]["\x63\157\155\160\141\164\137\x61\143\143\157\x75\x6e\x74"]); goto IRVK4; YG6LD: if (!($platform == "\167\x65\x63\150\x61\164" && in_array($link["\x74\x79\160\145"], array("\xe5\260\x8f\347\250\213\xe5\xba\x8f", "\xe4\xb8\xaa\xe4\xba\xba\xe5\xb0\217\347\xa8\213\345\xba\217")))) { goto j3mvP; } goto UWLCD; u3Yp0: FG7n1: goto yIiYC; BFCR1: UzlDC: goto E06jO; xrbTT: $img = murl("\x65\x6e\164\162\171\x2f\x77\x78\x61\160\x70\57\x71\162\143\x6f\144\x65", ["\x6d" => "\142\141\x69\x62\x61\156\x5f\x77\x78\x6c\151\x6e\x6b\x73", "\x69\x64" => $id, "\x72\x65\x61\154\144\x6f\x6d\x61\x69\156" => 1], true, true); goto Mz2Nf; aeIMe: KuX0T: goto lkcvH; OE90Q: pdo_update("\142\x61\x69\142\x61\x6e\137\167\x78\154\x69\x6e\x6b\x73\x5f\x76\x69\x73\151\x74", array("\166\151\x65\167\x73\x20\53\75" => 1), array("\154\x69\x6e\153\151\144" => $id, "\x64\x61\164\x65" => date("\131\155\x64"))); goto ftefj; O6sW4: if (strpos($ua, "\x6d\x69\x63\x72\x6f\x6d\145\x73\x73\145\x6e\x67\x65\x72") !== false && strpos($ua, "\x77\x78\x77\x6f\162\153") === false) { goto DziB0; } goto MwcOo; tMXy2: $platform = "\167\x65\143\x68\x61\164"; goto PLLRf; w2axS: gWyab: goto losH8; Mom9a: $ua = strtolower($_SERVER["\x48\124\124\x50\137\125\123\x45\x52\137\101\107\x45\x4e\x54"]); goto jDRQ6; r6Mk6: gNF0e: goto BC7pD; tVoL2: $advpage = attachment_url($this->module["\x63\157\156\146\151\147"]["\x61\x64\x76"]["\160\141\x67\x65"]); goto w1Ejw; n4ZoJ: if (empty($this->module["\143\x6f\156\146\x69\147"]["\141\144\166"]["\160\141\x67\x65"])) { goto RZ00s; } goto tVoL2; UWLCD: if ($link["\x77\x78\x61\160\x70\x69\x64"]) { goto gNF0e; } goto l3D_V; N2sQy: $link = pdo_get("\142\141\151\142\141\156\137\x77\170\154\x69\x6e\x6b\x73\x5f\154\x69\x6e\x6b\163", array("\x69\144" => $id, "\165\x6e\x69\141\x63\x69\x64" => $_W["\165\156\x69\141\x63\x69\144"])); goto anM79; bKK7g: exit; goto WOh3g; AGpZ2: $_W["\163\x69\164\145\162\x6f\157\x74"] = str_replace("\57\163\x2f", "\x2f", $_W["\x73\151\164\145\x72\x6f\x6f\x74"]); goto qig6G; eO9b1: $link["\143\x6f\x70\x79\x5f\167\157\162\x64\163"] = addcslashes($link["\x63\x6f\x70\x79\137\167\157\162\x64\163"], "\x5c\x22\12\15\11\57" . chr(8) . chr(12)); goto Mom9a; J_0RI: if (!($_SERVER["\x48\124\x54\120\x5f\110\117\123\124"] != $this->module["\x63\x6f\156\146\151\x67"]["\152\x73\163\x61\x66\x65\137\x64\157\155\x61\x69\156"])) { goto gWyab; } goto x9qXK; ag9Tc: if (!($path && $link["\161\165\145\x72\171"])) { goto IOUNL; } goto Y879k; NQJTd: header("\x4c\x6f\143\141\164\x69\x6f\156\72\x20" . $this->module["\143\157\x6e\x66\x69\147"]["\x65\170\160\x69\162\x65\x6a\165\155\160"]); goto I8O_5; jX5lt: NlU7W: goto aczha; FbB2e: if (!($user["\x65\x78\x70\x69\162\x65\x74\x69\155\145"] > time())) { goto NlU7W; } goto whZVG; pr5_w: if (!($platform == "\x77\x65\143\150\x61\164")) { goto uE7Fk; } goto Hm5Qs; M7uI1: $text = "\350\xaf\267\xe9\225\277\346\214\211\350\257\x86\345\x88\xab\xe4\272\214\xe7\273\xb4\347\240\x81"; goto zYs6k; csS45: exit; goto PnM4O; zkOgK: $id = $this->_gpc("\151\144"); goto N2sQy; MMdGq: j3mvP: goto dzTvh; mdzxo: include $this->template("\160\x63\160\x61\x67\x65"); goto lkdzt; WLgi3: exit; goto aeIMe; MwcOo: $platform = "\155\x6f\142\151\154\x65"; goto xEl6U; El6ZS: $_W["\x73\151\x74\145\x75\162\x6c"] = str_replace("\x2f\163\x2f", "\57\141\x70\160\x2f", $_W["\163\x69\x74\145\165\162\154"]); goto zkOgK; qTgTt: if (!empty($this->module["\143\157\156\x66\151\x67"]["\x61\144\166"]["\x70\x61\x67\x65\x76\151\x70"])) { goto WO7EL; } goto wmyvS; BC7pD: $wxapp = pdo_get("\142\141\x69\142\x61\x6e\137\x77\170\x6c\x69\x6e\x6b\x73\x5f\167\170\x61\160\x70\x73", array("\151\144" => $link["\x77\170\141\x70\x70\x69\x64"])); goto FuuMd; losH8: if ($_W["\x75\x6e\151\141\143\143\x6f\x75\x6e\x74"]->type == "\61" && $_W["\x75\x6e\x69\x61\x63\143\x6f\165\156\164"]->account["\x6c\x65\x76\x65\x6c"] == "\64") { goto tCmPI; } goto pY85f; x9qXK: $redirect = "\150\x74\x74\160\x3a\x2f\x2f" . $this->module["\x63\157\156\x66\151\147"]["\152\x73\x73\141\x66\x65\137\144\157\x6d\x61\x69\156"] . "\x2f\x61\x70\160\x2f\x69\x6e\144\145\x78\56\x70\x68\160\x3f\x69\75{$_W["\165\x6e\x69\x61\143\151\144"]}\46\x63\x3d\145\x6e\x74\162\171\46\141\x3d\167\170\141\x70\160\x26\144\157\x3d\160\x61\x67\x65\x26\x6d\75\142\141\151\142\141\156\x5f\167\170\x6c\x69\156\x6b\163\x26\151\x64\75" . $id; goto oGakp; PLLRf: TAjvR: goto E3mpS; ZBOOY: $path = ''; goto zCWYi; GNsfh: $text = "\350\xaf\267\xe5\234\250\345\xbe\256\xe4\277\241\xe6\265\217\350\xa7\210\xe5\231\250\344\271\213\345\244\x96\350\256\277\xe9\227\xae\346\255\xa4\xe9\x93\276\346\216\245"; goto y_G6I; rKSFN: IOUNL: goto mycvv; zYs6k: include $this->template("\160\143\x70\x61\x67\145"); goto DJU3H; ftefj: Z73Au: goto pr5_w; IRVK4: u6NKI: goto ho0ND; tJ3IQ: goto u6NKI; goto qa3ih; xEl6U: goto TAjvR; goto Gyq_q; iwd8z: if (!$link["\x77\170\141\160\160\151\144"]) { goto zJTUm; } goto wPhQc; pt5gT: Y4IRy: goto MMdGq; RTxaZ: if ($account_api) { goto qXVQA; } goto gO5bh; duNMu: tCmPI: goto iuI_s; ho0ND: if (!$account_api) { goto Px2oY; } goto FD13k; Hm5Qs: if (!($link["\x74\x79\160\x65"] == "\345\205\xac\344\274\227\xe5\x8f\xb7\xe6\226\x87\347\253\xa0")) { goto YYfqV; } goto vuvJ2; zCWYi: $qrcode = ''; goto BlowO; vDgkl: $text = "\345\220\216\345\217\260\346\234\xaa\350\256\276\xe7\xbd\xae\x4a\x53\xe5\xae\211\345\205\xa8\345\x9f\x9f\xe5\220\215"; goto BPlOz; f_T_1: $img = ''; goto M7uI1; On9Fe: $jssdk = ''; goto ZBOOY; qa3ih: wkNEP: goto EBdpm; DNt9p: $img = "{$_W["\x73\x69\x74\x65\162\157\157\164"]}\141\x64\144\157\156\x73\x2f\x62\141\151\142\x61\156\x5f\x77\x78\x6c\x69\x6e\153\x73\57\163\164\x61\x74\151\143\57\x34\x30\x34\x2e\160\x6e\147"; goto w5X40; sU4Mk: exit; goto u3Yp0; wPhQc: pdo_update("\x62\x61\x69\142\x61\156\137\x77\x78\x6c\151\x6e\153\x73\x5f\x77\170\x61\160\x70\x73", array("\166\x69\145\167\x73\40\x2b\75" => 1), array("\151\x64" => $link["\x77\x78\x61\160\160\151\x64"])); goto AX8Y4; m6o2q: global $_GPC, $_W; goto AGpZ2; Gyq_q: DziB0: goto tMXy2; BuG0Q: if (!($platform == "\160\143")) { goto KuX0T; } goto xrbTT; w6h2_: if ($this->module["\x63\x6f\x6e\146\x69\147"]["\152\x73\x73\141\146\x65\x5f\x64\157\x6d\141\x69\x6e"]) { goto C3KRk; } goto vDgkl; ySOvT: exit; goto w2axS; oL75B: RZ00s: goto Y0dK7; y_G6I: $img = "{$_W["\x73\151\164\145\x72\x6f\157\x74"]}\141\x64\x64\157\156\x73\x2f\x62\141\x69\142\141\x6e\137\x77\170\154\151\156\x6b\163\x2f\163\164\x61\164\151\143\57\x77\x72\x6f\156\147\x2e\x70\x6e\147"; goto mdzxo; w1Ejw: $advpageurl = $this->module["\143\157\x6e\x66\151\147"]["\x61\144\166"]["\160\x61\x67\145\x75\162\x6c"] ? $this->module["\143\x6f\156\x66\151\147"]["\141\x64\166"]["\160\x61\147\145\x75\162\x6c"] : "\x23"; goto qTgTt; lPUC_: goto Z73Au; goto pw_oR; PnM4O: xGm0q: goto eO9b1; EpUo7: pdo_update("\x62\x61\151\142\x61\156\x5f\167\170\x6c\151\156\x6b\x73\x5f\166\151\x73\151\164", array("\141\x72\x72\x69\166\145\x73\40\x2b\75" => 1), array("\x6c\x69\x6e\153\x69\x64" => $id, "\x64\x61\x74\x65" => date("\x59\x6d\144"))); goto R0RgU; DJU3H: exit; goto b7fCU; AX8Y4: zJTUm: goto WLEE5; l3D_V: $wxapp = ["\157\x72\x69\x64" => $this->module["\x63\x6f\x6e\146\151\147"]["\x6f\162\151\x64"]]; goto vleqU; BPlOz: $img = "{$_W["\163\x69\164\x65\x72\x6f\x6f\x74"]}\141\144\x64\x6f\x6e\x73\x2f\x62\x61\x69\x62\x61\156\x5f\x77\170\x6c\151\x6e\153\163\57\163\164\141\x74\151\143\57\167\162\x6f\x6e\147\56\x70\x6e\147"; goto oy2nL; whZVG: $advpage = ''; goto jX5lt; BlowO: $account_api = NULL; goto YG6LD; ov6iP: if (!preg_match("\57\50\160\150\157\x6e\145\x7c\160\x61\x64\x7c\x70\157\x64\x7c\151\160\x68\x6f\x6e\145\174\x69\160\157\x64\174\x69\x6f\x73\174\151\160\x61\144\x7c\141\156\x64\162\157\151\x64\x7c\155\157\x62\151\x6c\x65\x29\x2f\151", $ua)) { goto OHvhB; } goto O6sW4; mycvv: Px2oY: goto pt5gT; ubezA: $advpage = ''; goto n4ZoJ; cxd1q: $path = substr($link["\x70\x61\164\x68"], 1); goto ag9Tc; WLEE5: if (pdo_get("\x62\141\x69\x62\x61\x6e\137\167\x78\154\151\x6e\153\x73\x5f\x76\151\x73\151\164", array("\154\x69\156\153\151\144" => $id, "\144\141\164\145" => date("\131\x6d\144")))) { goto dh8yW; } goto tQrJL; anM79: if (!(!$link || $link["\x65\170\160\151\162\145\164\x69\155\145"] < time())) { goto xGm0q; } goto jfCFu; I8O_5: exit; goto BFCR1; jDRQ6: $platform = "\x70\143"; goto ov6iP; FD13k: $jssdk = json_encode($account_api->getJssdkConfig(), 256); goto cxd1q; qig6G: $_W["\x61\x74\164\141\143\x68\165\x72\x6c"] = str_replace("\57\163\x2f", "\57", $_W["\141\164\164\x61\x63\x68\165\x72\154"]); goto k3YOr; Y0dK7: include $this->template("\x70\141\x67\x65"); goto N7MAy; VNTLy: goto Y4IRy; goto vqx5X; PZIfk: exit; goto sXI1j; FuuMd: VDfHl: goto wZiL7; pw_oR: dh8yW: goto OE90Q; WOh3g: YYfqV: goto RTxaZ; daD0V: include $this->template("\x70\143\x70\141\x67\x65"); goto WLgi3; lkcvH: $hash = md5("\x23\44\45\100\x23\44\45\136\x62\x61\151\142\x61\156\x24\45\136\46\52\50" . $id . $link["\x77\x78\x61\x70\160\151\144"]); goto On9Fe; w5X40: include $this->template("\x70\143\x70\141\147\x65"); goto csS45; tQrJL: pdo_insert("\x62\141\x69\142\141\x6e\x5f\x77\x78\x6c\151\x6e\x6b\163\x5f\166\x69\x73\x69\x74", array("\x75\x6e\x69\141\143\151\x64" => $link["\x75\156\151\x61\x63\x69\x64"], "\167\170\x61\160\160\151\144" => $link["\x77\x78\x61\160\x70\151\x64"], "\165\163\x65\x72\x69\x64" => $link["\x75\x73\145\x72\x69\144"], "\x6c\x69\x6e\x6b\x69\144" => $link["\x69\x64"], "\x76\151\x65\x77\163" => 1, "\x64\141\x74\145" => date("\x59\155\144"))); goto lPUC_; oGakp: Header("\x4c\157\143\141\164\x69\157\156\x3a\x20{$redirect}"); goto ySOvT; rKNY3: goto u6NKI; goto duNMu; wmyvS: $user = pdo_get("\x62\141\x69\x62\141\156\137\167\170\x6c\x69\156\153\x73\137\165\x73\x65\x72\x73", array("\x69\x64" => $link["\165\x73\x65\x72\151\x64"])); goto FbB2e; b7fCU: goto FG7n1; goto KeNyl; pY85f: if ($this->module["\143\x6f\x6e\146\151\x67"]["\143\x6f\x6d\160\x61\x74\137\x61\143\x63\x6f\165\x6e\164"]) { goto wkNEP; } goto rKNY3; aczha: WO7EL: goto oL75B; lkdzt: exit; goto VNTLy; iuI_s: $account_api = WeAccount::create($_W["\165\156\x69\141\x63\151\144"]); goto tJ3IQ; N7MAy: } public function doPage() { goto NzZUr; qD6pL: $wxapp = pdo_get("\142\x61\x69\x62\x61\x6e\137\x77\x78\154\x69\156\153\x73\x5f\x77\170\141\160\160\x73", array("\x69\x64" => $link["\x77\x78\141\x70\x70\151\x64"])); goto u32Mo; F1REl: $_W["\x61\164\x74\141\x63\150\165\162\154"] = str_replace("\x2f\163\57", "\57", $_W["\141\164\164\x61\143\x68\x75\x72\154"]); goto oejFU; IksWv: bH4rB: goto rG2nC; eI8T9: if ($link) { goto iwOF9; } goto vajb7; fl8K2: Y_PZI: goto J7U6Z; t1SQO: q0T_q: goto vmO14; ZlMAw: $jssdk = ''; goto XxUvd; fBF8y: $advpageurl = $this->module["\143\x6f\156\146\151\x67"]["\x61\x64\166"]["\160\141\x67\145\x75\x72\x6c"] ? $this->module["\143\157\156\x66\151\147"]["\141\144\166"]["\x70\141\147\x65\x75\x72\154"] : "\x23"; goto XYy0N; NN83C: YQXy5: goto qD6pL; J13qO: pdo_update("\x62\141\x69\x62\x61\x6e\x5f\x77\170\154\151\x6e\153\x73\137\167\170\141\160\160\163", array("\166\x69\x65\167\x73\x20\x2b\75" => 1), array("\x69\144" => $link["\x77\x78\x61\x70\x70\x69\x64"])); goto rEyvS; qFx3v: exit; goto NJcVE; GtN52: if ($link["\167\x78\x61\x70\x70\151\x64"]) { goto YQXy5; } goto foX9E; rLYWI: $config = $this->module["\x63\157\156\146\x69\x67"]; goto p29Ff; XYy0N: if (!(empty($this->module["\143\157\x6e\146\151\x67"]["\141\144\x76"]["\160\141\x67\145\166\x69\160"]) && $user["\145\x78\160\151\x72\x65\164\151\x6d\x65"] > time())) { goto Edyjc; } goto NVQb7; u32Mo: yHaZ9: goto SYaxE; A8roN: VcxB2: goto GFSPM; C8VWS: include $this->template("\160\x61\x67\145"); goto uXSQR; OTqhA: hIzjv: goto fl8K2; Kyxxm: $error = ''; goto XuVt0; J7U6Z: pdo_update("\x62\x61\151\142\x61\x6e\137\x77\x78\154\151\x6e\x6b\163\137\x6c\151\156\153\163", array("\166\151\x65\167\163" => $link["\166\x69\145\167\163"] + 1), array("\x69\144" => $id)); goto kIC1m; NJcVE: MEQq2: goto TOOP5; P_WSF: oSkuY: goto aW237; G8fIu: $link["\x61\x70\160\137\164\x6f\x70"] = $config["\x61\x64\166"]["\x61\x70\160\164\157\x70"] ? attachment_url($config["\x61\144\x76"]["\141\x70\160\164\157\x70"]) : ''; goto V5oZz; ovLNm: goto i2EpN; goto xPhA0; J2NjO: exit; goto KExVp; iHp1T: $advpage = ''; goto NK9Ku; JVhBB: include $this->template("\x70\141\x67\145"); goto YxSns; qaIvx: goto GzsMF; goto P_WSF; SYaxE: $user = pdo_get("\x62\x61\151\142\x61\x6e\x5f\x77\170\x6c\x69\x6e\x6b\163\137\165\163\x65\162\163", array("\x69\144" => $link["\165\x73\x65\x72\151\x64"])); goto iHp1T; XxUvd: $path = ''; goto Kyxxm; vmO14: if (!(strpos($_SERVER["\110\124\124\120\137\125\x53\x45\122\137\x41\107\x45\x4e\x54"], "\x4d\151\x63\x72\157\x4d\x65\163\x73\145\x6e\x67\145\162") !== false)) { goto r4NCs; } goto wkOLF; IHE37: $link = pdo_get("\142\141\151\142\141\x6e\137\167\x78\154\x69\x6e\x6b\x73\x5f\x6c\x69\156\x6b\163", array("\151\x64" => $id, "\x75\156\151\x61\143\x69\x64" => $_W["\165\x6e\151\x61\x63\151\x64"])); goto eI8T9; j9xwd: $link["\x61\160\160\137\x74\157\160"] = local_attachment_url($link["\141\x70\x70\x5f\164\x6f\x70"]); goto BCMe4; TOOP5: r4NCs: goto LP2qR; pup8I: if (!$account_api) { goto hIzjv; } goto DSs0F; hFhbt: if (!($link["\x65\170\x70\151\162\x65\164\151\x6d\x65"] < time())) { goto cec3g; } goto hF9KK; uXSQR: exit; goto t1SQO; N1lVA: cec3g: goto GtN52; DSs0F: $jssdk = json_encode($account_api->getJssdkConfig(), 256); goto o89Zl; KyFo4: $path .= "\x3f" . $link["\x71\x75\145\x72\x79"]; goto A6LB0; hF9KK: if (!$this->module["\x63\157\156\146\151\147"]["\145\170\x70\151\162\145\152\x75\155\x70"]) { goto dEm81; } goto MD8V7; vJIx8: pdo_insert("\x62\141\151\142\141\x6e\x5f\167\x78\x6c\x69\x6e\153\x73\137\166\x69\x73\151\x74", array("\x75\156\151\141\x63\151\144" => $link["\x75\x6e\x69\x61\143\151\x64"], "\x77\170\141\x70\x70\x69\x64" => $link["\167\x78\x61\160\x70\x69\144"], "\x75\x73\x65\x72\x69\144" => $link["\x75\163\x65\x72\151\144"], "\154\x69\156\x6b\151\144" => $link["\151\144"], "\x76\x69\145\167\163" => 1, "\144\x61\x74\x65" => date("\131\155\144"))); goto qaIvx; LHOLy: $advpage = attachment_url($this->module["\x63\x6f\x6e\x66\x69\147"]["\141\x64\166"]["\x70\141\147\145"]); goto fBF8y; BCMe4: goto Bhj9w; goto Il_NC; fJW15: if (pdo_get("\x62\141\151\x62\x61\156\x5f\167\170\x6c\151\156\153\163\137\166\151\163\x69\164", array("\x6c\x69\156\153\x69\144" => $id, "\144\x61\x74\145" => date("\131\x6d\x64")))) { goto oSkuY; } goto vJIx8; KExVp: iwOF9: goto hFhbt; aW237: pdo_update("\142\141\x69\142\x61\156\137\167\170\154\151\156\x6b\163\x5f\166\x69\x73\x69\x74", array("\x76\x69\x65\167\x73\x20\x2b\x3d" => 1), array("\x6c\151\x6e\153\x69\x64" => $id, "\x64\x61\x74\145" => date("\x59\155\144"))); goto AnXk0; AjB6x: goto yHaZ9; goto NN83C; NK9Ku: if (empty($this->module["\x63\x6f\x6e\x66\x69\147"]["\x61\144\x76"]["\x70\141\147\x65"])) { goto Jj9ST; } goto LHOLy; rG2nC: $_W["\x73\151\x74\145\x72\157\157\x74"] = str_replace("\x2f\163\x2f", "\57", $_W["\x73\151\x74\145\x72\x6f\157\x74"]); goto F1REl; hwKhh: exit; goto N1lVA; p29Ff: if (!$link["\x61\160\x70\x5f\x74\157\x70"]) { goto CKB0t; } goto j9xwd; Isp9h: $redirect = "\150\164\164\160\72\x2f\x2f" . $this->module["\x63\x6f\x6e\x66\x69\x67"]["\x6a\x73\163\141\x66\145\137\144\x6f\155\141\x69\x6e"] . "\x2f\x61\160\x70\57\151\x6e\144\145\170\56\x70\x68\x70\x3f\151\x3d{$_W["\165\x6e\x69\141\143\x69\x64"]}\x26\143\x3d\x65\156\x74\162\171\x26\141\x3d\x77\x78\141\x70\x70\46\144\x6f\75\x70\141\x67\145\46\155\75\142\x61\x69\x62\x61\156\137\x77\x78\x6c\151\x6e\153\x73\x26\151\x64\75" . $id; goto Hiv4D; DRR8Q: if (!($path && $link["\x71\165\145\x72\x79"])) { goto azAbC; } goto KyFo4; vajb7: $error = "\xe9\x93\xbe\xe6\216\245\xe5\xb7\262\xe5\x88\240\xe9\231\244"; goto Wlg5h; h0duh: if ($_W["\x75\156\151\141\143\143\157\x75\x6e\164"]->type == "\x31" && $_W["\165\x6e\151\141\143\x63\x6f\x75\x6e\x74"]->account["\x6c\145\166\x65\154"] == "\x34") { goto VcxB2; } goto oN1yS; NmCtm: $hash = md5("\x23\44\45\x40\43\x24\x25\136\142\141\x69\142\x61\x6e\x24\45\136\x26\52\x28" . $id . $link["\x77\x78\141\x70\160\151\x64"]); goto ZlMAw; YV3yL: Jj9ST: goto NmCtm; CsP9L: $error = "\xe5\220\x8e\345\x8f\260\346\234\252\350\256\276\347\xbd\256\x4a\123\xe5\xae\x89\xe5\205\xa8\xe5\x9f\237\345\220\215"; goto C8VWS; JZ3go: dEm81: goto KLnLO; tZ5nt: $_W["\163\151\x74\145\x75\x72\x6c"] = str_replace("\x2f\163\57", "\57\x61\x70\x70\57", $_W["\163\151\164\145\165\162\x6c"]); goto UvH9s; foX9E: $wxapp = ["\157\x72\151\144" => $this->module["\x63\x6f\156\146\x69\147"]["\157\x72\151\x64"]]; goto AjB6x; wkOLF: if (!($_SERVER["\110\x54\x54\x50\137\x48\x4f\123\x54"] != $this->module["\143\x6f\x6e\146\x69\x67"]["\152\x73\163\141\146\x65\137\x64\x6f\155\x61\x69\x6e"])) { goto MEQq2; } goto Isp9h; ZKvXG: exit; goto JZ3go; Hiv4D: Header("\114\157\143\141\x74\151\x6f\156\x3a\40{$redirect}"); goto qFx3v; boCzl: if (!$this->module["\x63\157\x6e\x66\151\x67"]["\156\145\167\150\x35"]) { goto bH4rB; } goto VXfJP; XuVt0: if (!$wxapp["\x6f\x72\151\144"]) { goto Y_PZI; } goto Ow2WF; KLnLO: $error = "\346\x9c\215\xe5\x8a\xa1\xe5\xb7\xb2\350\xbf\207\xe6\x9c\x9f"; goto bpEpX; LP2qR: $account_api = NULL; goto h0duh; GFSPM: $account_api = WeAccount::create($_W["\x75\x6e\151\141\x63\151\x64"]); goto ovLNm; MD8V7: header("\x4c\x6f\x63\141\x74\x69\x6f\156\72\40" . $this->module["\x63\x6f\156\146\x69\147"]["\x65\x78\x70\x69\x72\x65\152\165\x6d\160"]); goto ZKvXG; bpEpX: include $this->template("\x70\141\x67\145"); goto hwKhh; kIC1m: if (!$link["\x77\x78\141\160\160\151\144"]) { goto VUZQ_; } goto J13qO; Wlg5h: include $this->template("\x70\141\147\x65"); goto J2NjO; A6LB0: azAbC: goto OTqhA; VXfJP: return $this->newPage(); goto IksWv; NVQb7: $advpage = ''; goto qDsWG; AnXk0: GzsMF: goto rLYWI; NzZUr: global $_GPC, $_W; goto boCzl; rEyvS: VUZQ_: goto fJW15; oN1yS: if ($this->module["\143\x6f\x6e\146\151\147"]["\x63\x6f\x6d\x70\x61\x74\137\141\x63\x63\x6f\165\x6e\164"]) { goto bgOxS; } goto GWxOH; UvH9s: $id = $this->_gpc("\x69\144"); goto IHE37; oejFU: $_W["\x61\164\164\x61\x63\x68\x75\162\x6c\137\154\x6f\x63\x61\x6c"] = str_replace("\57\x73\57", "\57", $_W["\141\164\164\141\x63\x68\165\x72\154\137\154\x6f\143\141\154"]); goto tZ5nt; o89Zl: $path = substr($link["\x70\x61\x74\x68"], 1); goto DRR8Q; qDsWG: Edyjc: goto YV3yL; GWxOH: goto i2EpN; goto A8roN; lo2_P: $account_api = WeAccount::create($this->module["\x63\157\156\146\x69\147"]["\143\x6f\x6d\x70\141\164\137\x61\x63\143\x6f\x75\x6e\x74"]); goto rl8Ri; Ow2WF: if ($this->module["\143\157\156\x66\151\147"]["\152\163\163\141\146\145\137\144\157\155\x61\151\156"]) { goto q0T_q; } goto CsP9L; rl8Ri: i2EpN: goto pup8I; xPhA0: bgOxS: goto lo2_P; Il_NC: CKB0t: goto G8fIu; V5oZz: Bhj9w: goto JVhBB; YxSns: } public function doArrive() { goto sHv1m; OX7sD: t8wUV: goto Aeao2; sHv1m: global $_GPC; goto cw7B2; htZS5: if (!$wxappid) { goto t8wUV; } goto xNZge; QK1VI: if (!(md5("\43\44\45\x40\43\44\45\136\142\x61\x69\x62\x61\x6e\x24\45\x5e\x26\x2a\x28" . $id . $wxappid) != $this->_gpc("\x68\x61\163\150"))) { goto BNvC5; } goto QhAqE; xNZge: pdo_update("\142\x61\x69\x62\x61\156\x5f\x77\170\x6c\x69\156\153\163\137\167\170\141\x70\x70\163", array("\x61\162\x72\x69\x76\x65\x73\40\53\75" => 1), array("\x69\x64" => $wxappid)); goto OX7sD; QhAqE: return "\156\x6f\x74\40\x61\x6c\154\x6f\167\145\144"; goto Qdxzc; Qdxzc: BNvC5: goto CKatb; CKatb: pdo_update("\142\141\x69\x62\x61\x6e\137\x77\170\x6c\151\156\153\x73\137\154\151\156\x6b\163", array("\141\x72\162\x69\166\145\163\40\x2b\75" => 1), array("\x69\x64" => $id)); goto lD23E; lD23E: pdo_update("\x62\141\151\142\x61\x6e\137\167\170\154\151\x6e\x6b\x73\137\x76\151\x73\151\164", array("\x61\x72\162\151\x76\x65\163\40\x2b\x3d" => 1), array("\154\151\156\153\151\x64" => $id, "\x64\x61\x74\145" => date("\x59\155\144"))); goto htZS5; bDDVQ: $wxappid = intval($_GPC["\x77\170\x61\x70\160\x69\x64"]); goto QK1VI; cw7B2: $id = $this->_gpc("\x69\144"); goto bDDVQ; Aeao2: } public function doUniPage() { goto N9onn; jpE1W: if (!(!$config["\x70\162\157\155\x6f\x74\x69\157\x6e"]["\x76\151\160\163\150\157\167"] && $user["\x65\170\x70\x69\x72\145\x74\x69\x6d\145"] > time())) { goto Omi2e; } goto wQ1yX; hrTCj: EQUGB: goto LRQzo; Cqq79: CLL32: goto S6_HB; kjCVs: $link["\x61\144\x76\x6d\145\x73\163\141\x67\145\x69\155\x67"] = local_attachment_url($link["\x6d\x65\x73\163\141\147\x65\x5f\x69\x6d\x67"]); goto lnTxP; oHW_B: unset($link["\x6d\145\163\x73\141\x67\x65\x5f\x69\155\x67"]); goto FcQ56; lJ3Th: $link["\141\144\x76\x61\x70\160\164\145\x78\x74"] = $link["\x61\x70\x70\x5f\164\x65\x78\164"]; goto yBV0J; NU26E: goto FsLuD; goto Difns; NYPAi: QhYgt: goto e_Gwm; zaIbf: $link["\167\170\141\160\x70"] = pdo_get("\142\141\151\x62\x61\x6e\x5f\x77\x78\154\151\156\x6b\x73\x5f\x77\x78\141\160\x70\163", array("\151\x64" => $link["\167\170\x61\160\x70\151\x64"]), array("\141\160\x70\x69\144", "\x6f\162\151\x64")); goto i9BDd; S6_HB: $link["\141\x64\166\141\160\160\164\x65\x78\x74"] = $config["\141\x64\x76"]["\x61\160\x70\164\145\x78\164"]; goto gd9Ss; LRQzo: if (!($link["\x74\x79\160\145"] == "\xe5\260\x8f\xe7\250\213\xe5\xba\x8f")) { goto p6BGp; } goto hjCSb; bNFhk: $link["\160\162\x6f\x6d\157\164\151\x6f\x6e"] = $config["\x70\x72\157\x6d\157\164\x69\157\x6e"]["\x6a\165\155\160"]; goto jpE1W; mcdru: $link = pdo_get("\x62\x61\x69\x62\141\x6e\x5f\167\x78\154\151\x6e\153\163\x5f\x6c\x69\156\x6b\x73", array("\151\x64" => $id, "\x75\156\151\141\x63\151\144" => $_W["\x75\156\x69\141\143\151\x64"])); goto KA2LG; xlnNU: $link["\x61\144\166\141\x70\160\164\x6f\x70"] = local_attachment_url($link["\141\160\160\x5f\164\157\x70"]); goto NU26E; zYWir: $id = $this->_gpc("\x69\144"); goto mcdru; T21YY: return $this->result(-1, "\xe6\x9c\252\350\203\xbd\346\211\xbe\xe5\x88\xb0\xe9\x93\xbe\xe6\216\245"); goto hrTCj; hjCSb: return $this->result(-1, "\xe6\x97\xa0\346\225\210\xe7\x9a\x84\351\223\276\xe6\x8e\245\347\261\273\345\236\x8b"); goto VPlUu; N9onn: global $_GPC, $_W; goto zYWir; BT7gj: if (isset($config["\x70\x72\x6f\x6d\x6f\x74\151\157\x6e"]["\152\165\x6d\160"])) { goto tKdMW; } goto vsM8_; lnTxP: goto GjCv2; goto TfB03; e_Gwm: if (!$link["\155\x65\x73\163\141\x67\145\x5f\x69\155\147"]) { goto Ld0OG; } goto kjCVs; CWR6E: GjCv2: goto niXK1; x0zt9: $config = $this->module["\x63\157\156\146\x69\147"]; goto BT7gj; tYyuB: if (!($link["\x74\x79\160\x65"] == "\xe4\270\252\344\xba\xba\xe5\260\x8f\347\250\x8b\xe5\xba\217")) { goto BGmam; } goto zaIbf; Difns: iRZD2: goto Xniq7; gd9Ss: XZfqe: goto oHW_B; vsM8_: $link["\160\x72\157\155\x6f\x74\x69\157\156"] = ''; goto iEivc; niXK1: if (!$link["\141\x70\x70\x5f\x74\157\x70"]) { goto iRZD2; } goto xlnNU; wrULn: Omi2e: goto NYPAi; iEivc: goto QhYgt; goto hEGcv; KA2LG: if ($link) { goto EQUGB; } goto T21YY; wQ1yX: $link["\x70\x72\157\x6d\157\x74\x69\x6f\156"] = ''; goto wrULn; BtF10: $link["\x61\x64\x76\155\145\x73\x73\141\147\145\151\x6d\x67"] = $config["\x61\144\166"]["\155\145\x73\163\141\147\x65\151\155\147"] ? attachment_url($config["\141\144\166"]["\155\145\163\x73\x61\147\x65\x69\x6d\x67"]) : ''; goto CWR6E; KNMtL: $user = pdo_get("\x62\x61\x69\x62\x61\x6e\137\167\x78\154\x69\156\153\x73\137\x75\163\145\x72\163", array("\151\144" => $link["\165\163\x65\x72\151\144"])); goto bNFhk; Z96W0: if (!$link["\141\x70\x70\137\x74\145\x78\164"]) { goto CLL32; } goto lJ3Th; VPlUu: p6BGp: goto tYyuB; i9BDd: BGmam: goto x0zt9; TfB03: Ld0OG: goto BtF10; DDdPc: FsLuD: goto Z96W0; FcQ56: unset($link["\x61\160\160\137\x74\157\160"]); goto abl3O; hEGcv: tKdMW: goto KNMtL; Xniq7: $link["\141\x64\x76\141\160\x70\164\x6f\x70"] = $config["\141\x64\166"]["\141\x70\x70\164\x6f\x70"] ? attachment_url($config["\141\x64\x76"]["\x61\160\x70\x74\x6f\x70"]) : ''; goto DDdPc; abl3O: unset($link["\x61\160\160\137\x74\x65\170\164"]); goto NZRQH; yBV0J: goto XZfqe; goto Cqq79; NZRQH: return $this->result(0, "\xe9\223\xbe\346\x8e\xa5\xe8\xaf\xa6\xe6\203\x85", $link); goto Kd7QQ; Kd7QQ: } public function doUserHome() { goto pyDpX; UKaof: return $this->result(0, "\350\216\267\xe5\217\226\347\224\250\346\x88\267\xe5\x9f\272\346\234\xac\xe4\277\241\xe6\x81\257", array("\165\163\145\x72\x69\x6e\146\157" => $userinfo, "\160\145\162\163\x6f\156\141\154\x5f\x64\x6f\155\x61\x69\156" => $personal_domain, "\151\x73\x76\151\x70" => $isvip, "\x76\151\160\x73\x74\x61\164\x75\x73" => $vipstatus, "\x68\x65\154\160\165\x72\x6c" => $this->module["\143\157\x6e\146\151\147"]["\x68\145\154\160\165\162\154"], "\143\157\x6e\x74\141\143\164" => $this->module["\143\157\156\146\x69\147"]["\143\x6f\x6e\x74\141\x63\164"])); goto vZcJw; srXBS: $personal = array(); goto e3lMz; QhG6U: $personal = json_decode($userinfo["\x63\x6f\x6e\146\151\147"], true); goto zwFTB; Lr0Er: TIqaQ: goto d44M8; e3lMz: oxJxi: goto d30O8; d44M8: $personal_domain = true; goto VTcN7; bWWTP: if ($isvip && $personal["\x64\157\x6d\x61\151\x6e"]) { goto TIqaQ; } goto ZYyMP; VTcN7: qrV4V: goto dedwa; HfLFN: unset($userinfo["\143\x6f\x6e\x66\x69\x67"]); goto JqZkS; JGOVh: $isvip = $this->userinfo["\x65\x78\160\151\x72\145\164\x69\x6d\145"] > $now ? true : false; goto bWWTP; Sx5uE: goto qrV4V; goto Lr0Er; zwFTB: if (!empty($personal)) { goto oxJxi; } goto srXBS; dedwa: $vipstatus = vip_status_str($this->userinfo); goto UKaof; d30O8: unset($userinfo["\160\x61\x73\163\167\x6f\x72\x64"]); goto HfLFN; JqZkS: $now = time(); goto JGOVh; ZYyMP: $personal_domain = false; goto Sx5uE; pyDpX: $userinfo = $this->userinfo; goto QhG6U; vZcJw: } public function doGetPremiums() { goto Yfjjw; I1nB8: wGmNj: goto ec0f4; pm2K2: $personal = json_decode($this->userinfo["\x63\x6f\156\146\151\x67"], true); goto wL4_E; T1AZF: $freeright = $vipright = ''; goto TY0Vs; D9cVS: C21sX: goto TisQc; Jk65n: goto wGmNj; goto D9cVS; m7RSx: if (!isset($premiums["\166\151\x70\162\151\147\x68\x74"])) { goto lKYjO; } goto kPsHP; kPsHP: $vipright = explode("\xa", $premiums["\x76\x69\x70\162\x69\x67\x68\x74"]); goto TY0AU; MbmeE: $personal = array(); goto g23wq; g23wq: fV8Ak: goto DhQ8h; TisQc: $personal_domain = true; goto I1nB8; Yfjjw: $premiums = $this->module["\143\x6f\156\146\x69\147"]["\160\x72\145\155\x69\x75\155\163"]; goto HrFlP; wL4_E: if (!empty($personal)) { goto fV8Ak; } goto MbmeE; f5VsI: Dviq7: goto m7RSx; HrFlP: $premiums = str_replace("\15", '', $premiums); goto T1AZF; vqZ4L: return $this->result(0, "\350\x8e\xb7\xe5\x8f\226\344\xbc\x9a\345\221\230\xe6\x9d\x83\347\233\212", array("\146\x72\x65\145" => $freeright, "\x76\151\160" => $vipright, "\x70\x65\x72\x73\157\156\x61\x6c\x5f\x64\x6f\x6d\141\x69\156" => $personal_domain, "\x69\163\166\151\160" => $isvip, "\x76\x69\160\163\164\141\x74\x75\163" => $vipstatus, "\143\157\x6e\164\141\143\x74" => $this->module["\x63\157\x6e\x66\151\x67"]["\143\x6f\x6e\164\141\x63\x74"])); goto yAJbw; PzAuq: $freeright = explode("\xa", $premiums["\146\162\x65\x65\x72\x69\x67\150\x74"]); goto f5VsI; DhQ8h: $now = time(); goto yXXlF; TY0Vs: if (!isset($premiums["\146\162\x65\x65\x72\151\x67\x68\164"])) { goto Dviq7; } goto PzAuq; iNzwK: if ($isvip && $personal["\144\x6f\x6d\141\x69\156"]) { goto C21sX; } goto PD9xI; PD9xI: $personal_domain = false; goto Jk65n; yXXlF: $isvip = $this->userinfo["\x65\x78\x70\x69\x72\145\164\x69\x6d\x65"] > $now ? true : false; goto iNzwK; TY0AU: lKYjO: goto pm2K2; ec0f4: $vipstatus = vip_status_str($this->userinfo); goto vqZ4L; yAJbw: } public function doCheckCdkey() { goto r2FxE; AfYil: $expiretime = time() + $cdkey["\x64\x61\x79\x73"] * 86400; goto I0mvF; yOAmZ: QewO_: goto jgIrY; LO0Ra: b30E0: goto LMtBa; ScIsd: return $this->result(-1, "\345\x8d\xa1\xe5\257\x86\xe6\227\xa0\346\x95\x88"); goto U_KEN; q4TKo: vZa49: goto R6nc6; R6nc6: if ($this->userinfo["\x65\x78\160\151\x72\145\x74\x69\155\x65"] > time()) { goto b30E0; } goto AfYil; U_KEN: pRMca: goto U5Us3; I0mvF: goto QewO_; goto LO0Ra; fqTf0: $cdkeystr = $this->_gpc("\143\144\153\145\x79"); goto B4fxi; jsscY: return $this->result(-2, "\xe5\215\241\345\257\x86\xe5\267\262\350\xa2\xab\xe4\275\277\xe7\x94\xa8"); goto q4TKo; B4fxi: if ($cdkey = pdo_get("\142\x61\x69\x62\x61\x6e\x5f\x77\x78\154\x69\x6e\153\163\x5f\143\x64\153\x65\171\163", array("\165\x6e\151\x61\x63\x69\144" => $_W["\x75\156\x69\141\x63\x69\144"], "\143\x64\x6b\x65\171" => $cdkeystr))) { goto pRMca; } goto ScIsd; jgIrY: pdo_update("\x62\141\151\x62\141\156\x5f\167\170\x6c\151\x6e\153\x73\x5f\x75\163\x65\162\163", array("\x65\x78\x70\151\x72\x65\164\151\x6d\x65" => $expiretime), array("\x69\144" => $this->userinfo["\151\144"], "\165\x6e\151\141\x63\151\144" => $_W["\165\x6e\x69\141\x63\151\144"])); goto BIXB_; BIXB_: pdo_update("\x62\x61\151\x62\x61\x6e\x5f\x77\170\x6c\151\x6e\153\163\137\x6c\x69\x6e\153\163", array("\x65\170\160\x69\162\x65\x74\151\x6d\145" => $expiretime), array("\165\x73\x65\x72\151\144" => $this->userinfo["\151\x64"], "\165\156\x69\141\x63\151\144" => $_W["\165\156\151\141\143\151\144"])); goto SMvr_; r2FxE: global $_GPC, $_W; goto fqTf0; LMtBa: $expiretime = $this->userinfo["\145\170\x70\x69\x72\145\x74\151\x6d\145"] + $cdkey["\x64\x61\x79\x73"] * 86400; goto yOAmZ; q1ieL: return $this->result(0, "\346\x81\xad\xe5\226\x9c\346\x82\xa8\xe5\xb7\262\xe6\210\x90\345\212\x9f\345\x85\221\346\215\242{$cdkey["\144\141\x79\x73"]}\xe5\xa4\xa9\344\xbc\232\345\221\230"); goto bkclL; SMvr_: pdo_update("\142\141\x69\142\141\156\x5f\x77\170\x6c\151\x6e\x6b\x73\x5f\143\x64\x6b\x65\x79\x73", array("\x75\163\x65\164\151\155\145" => time(), "\x75\163\x65\x72\x69\144" => $this->userinfo["\x69\144"]), array("\x75\156\x69\141\143\x69\x64" => $_W["\165\x6e\x69\141\143\x69\x64"], "\x63\x64\153\x65\x79" => $cdkeystr)); goto q1ieL; U5Us3: if (!$cdkey["\165\163\x65\164\151\x6d\145"]) { goto vZa49; } goto jsscY; bkclL: } public function doPlatform() { goto EPelV; qmUGU: pdo_update("\142\x61\x69\x62\x61\156\137\167\x78\x6c\x69\156\153\163\x5f\160\154\141\164\146\157\162\155", array("\x63\x6f\x6d\160\157\x6e\145\156\x74\137\x76\x65\162\x69\146\x79\137\x74\151\143\x6b\145\164" => $ticket), array("\165\x6e\151\x61\x63\151\x64" => $_W["\x75\x6e\151\141\143\151\x64"])); goto b4b5X; dBbG1: $ticket = strval($ticket_xml->ComponentVerifyTicket); goto qmUGU; hJLiK: $decode_ticket = aes_decode($encode_ticket->Encrypt, $platform["\x63\x6f\155\x70\157\156\x65\156\164\137\x6b\x65\x79"]); goto qOO9x; J45wP: GR3UM: goto hJLiK; m72zx: if (!(empty($post) || empty($encode_ticket) || strval($encode_ticket->AppId) != $platform["\143\x6f\x6d\x70\x6f\x6e\145\x6e\164\x5f\141\160\x70\151\144"])) { goto GR3UM; } goto AXhoO; SVPE0: if (!(!empty($ticket_xml->ComponentVerifyTicket) && "\143\157\x6d\x70\x6f\156\145\156\x74\137\166\145\162\x69\146\171\137\x74\151\x63\153\x65\x74" == $ticket_xml->InfoType)) { goto l2S2W; } goto dBbG1; pP8sG: if (!empty($ticket_xml)) { goto gkCpW; } goto TF3Kq; AXhoO: exit("\x66\x61\x69\x6c"); goto J45wP; T3e3D: $encode_ticket = isimplexml_load_string($post, "\123\x69\x6d\160\x6c\x65\130\115\x4c\x45\154\x65\x6d\x65\x6e\164", LIBXML_NOCDATA); goto m72zx; O7Pu_: $post = file_get_contents("\160\x68\160\x3a\57\x2f\x69\x6e\160\x75\x74"); goto ih0xx; hbCDx: if ($platform) { goto zgkjD; } goto rvvZR; b4b5X: l2S2W: goto dVlYi; RuSfQ: gkCpW: goto SVPE0; EPelV: global $_GPC, $_W; goto O7Pu_; dVlYi: exit("\x73\x75\x63\x63\x65\163\163"); goto Z5NjK; ih0xx: $platform = pdo_get("\142\x61\151\x62\141\x6e\x5f\167\170\154\151\156\x6b\x73\x5f\x70\x6c\141\164\x66\157\x72\155", array("\x75\x6e\x69\x61\x63\x69\144" => $_W["\x75\156\x69\x61\143\x69\144"])); goto hbCDx; NR91o: zgkjD: goto T3e3D; qOO9x: $ticket_xml = isimplexml_load_string($decode_ticket, "\x53\151\155\160\154\x65\x58\115\114\105\x6c\x65\155\x65\156\164", LIBXML_NOCDATA); goto pP8sG; rvvZR: exit("\146\141\151\x6c"); goto NR91o; TF3Kq: exit("\146\x61\151\x6c"); goto RuSfQ; Z5NjK: } public function doAuth() { goto YeiU3; qoIUZ: exit("\xe6\x9c\xaa\xe8\xae\xbe\xe7\275\256\xe4\270\x80\351\224\256\xe6\x8e\210\xe6\235\x83\345\x8f\202\346\225\xb0"); goto pNONo; VFIKO: I2gzm: goto Ueoc1; ztJzT: exit("\xe5\xbc\x80\346\224\xbe\345\xb9\xb3\345\x8f\xb0\xe5\260\232\346\x9c\xaa\xe7\x94\237\xe6\x95\210\xef\xbc\x8c\350\xaf\267\61\x30\345\210\x86\xe9\222\237\xe5\x90\x8e\xe5\206\x8d\xe8\257\x95"); goto VFIKO; nYGoO: $url = urlencode($_W["\163\151\x74\x65\162\x6f\x6f\164"] . "\57\x61\144\144\157\156\x73\x2f\142\141\151\142\141\x6e\x5f\x77\x78\x6c\151\156\153\163\57\x63\142\56\x70\150\160\77\x70\141\x72\141\155\x73\x3d" . $_W["\165\156\x69\141\x63\x69\x64"] . "\x40" . $_GPC["\157\160\x65\156\x69\x64"]); goto SQ8M7; YeiU3: global $_GPC, $_W; goto Wds1d; DIgIe: $pre_auth_code = $Platform->getPreauthCode(); goto nYGoO; h9ty7: $Platform = new Pf($platform); goto DIgIe; SQ8M7: echo "\x3c\x73\143\162\151\x70\x74\x3e\x20\167\151\156\x64\157\x77\x2e\x6c\x6f\143\x61\x74\x69\157\156\x2e\x68\162\x65\x66\x3d\x27\150\x74\x74\160\x73\x3a\x2f\x2f\x6d\160\x2e\167\145\x69\x78\x69\x6e\56\161\x71\56\x63\x6f\x6d\x2f\x73\141\146\145\x2f\x62\151\156\x64\143\x6f\155\x70\157\156\145\156\164\x3f\141\x63\164\151\x6f\156\75\142\x69\156\x64\143\157\155\x70\x6f\x6e\x65\156\164\x26\141\x75\164\150\x5f\164\171\x70\x65\75\62\x26\x6e\x6f\x5f\163\143\x61\x6e\75\61\46\143\x6f\x6d\x70\157\156\145\x6e\x74\137\141\160\x70\151\144\x3d{$platform["\143\157\x6d\160\x6f\x6e\145\x6e\164\137\x61\x70\x70\151\144"]}\46\x70\162\x65\x5f\141\x75\x74\x68\x5f\x63\157\144\x65\x3d{$pre_auth_code}\x26\x72\x65\144\151\x72\145\143\164\137\165\162\151\x3d{$url}\47\74\57\163\x63\x72\151\160\164\76"; goto Jn1wA; Ueoc1: include MODULE_ROOT . "\57\x6c\151\x62\57\160\x66\x2e\x70\150\160"; goto h9ty7; Wds1d: $platform = pdo_get("\x62\141\x69\142\x61\x6e\137\x77\170\x6c\x69\156\x6b\x73\x5f\160\x6c\141\164\146\157\x72\155", array("\165\x6e\151\141\x63\151\144" => $_W["\165\x6e\x69\141\143\151\144"])); goto YbErc; pNONo: Ztn_b: goto D3fyD; YbErc: if ($platform) { goto Ztn_b; } goto qoIUZ; D3fyD: if ($platform["\x63\x6f\155\160\x6f\x6e\x65\156\x74\137\x76\145\x72\x69\146\x79\x5f\164\x69\x63\x6b\x65\164"]) { goto I2gzm; } goto ztJzT; Jn1wA: } public function doAuthcb() { goto V9PEi; r4tH_: $info = $Platform->getAuthorizerInfo($author["\141\165\164\150\157\162\x69\x7a\x61\x74\151\157\x6e\x5f\x69\x6e\x66\157"]["\x61\165\164\x68\157\162\151\x7a\x65\x72\x5f\141\160\160\151\x64"]); goto GDz8C; Qu_TY: exit("\346\227\xa0\346\225\x88\347\232\x84\347\224\xa8\xe6\x88\267"); goto TGeWm; tnN0N: include MODULE_ROOT . "\x2f\154\x69\x62\57\160\x66\56\160\x68\x70"; goto UZRsY; GoyEI: $custom = array("\155\x73\x67\x74\171\160\145" => "\164\145\x78\x74", "\164\145\170\164" => array("\x63\157\156\164\x65\156\164" => "\x3c\x61\40\x64\141\164\x61\55\155\x69\x6e\151\160\x72\157\x67\x72\141\x6d\x2d\141\160\160\x69\x64\75\x22" . $_W["\x61\x63\143\x6f\165\156\x74"]->account["\x6b\x65\171"] . "\42\x20\x64\141\x74\141\x2d\x6d\151\x6e\x69\160\162\x6f\x67\162\141\x6d\x2d\x70\141\x74\150\x3d\x22\x2f\160\x61\147\x65\x73\57\151\x6e\x64\x65\x78\57\x77\x78\141\x70\160\144\x65\164\141\x69\x6c\x3f\151\144\75" . $wxapp["\151\144"] . "\x22\76" . urlencode("\xe2\x91\242\xe6\201\xad\345\x96\x9c\xe6\202\xa8\345\xb7\262\xe6\x88\x90\xe5\x8a\x9f\xe6\x8e\x88\xe6\x9d\x83\xe5\xbe\xae\xe4\xbf\241\345\260\x8f\347\250\213\xe5\272\217\357\xbc\214\347\202\271\345\x87\xbb\350\277\x99\xe9\x87\214\xe6\237\245\347\x9c\x8b\xe8\257\xa6\xe6\203\x85") . "\74\x2f\141\x3e"), "\164\x6f\165\163\x65\x72" => $user["\x6f\160\145\x6e\x69\144"]); goto uYGqY; bTN4E: $platform = pdo_get("\142\141\x69\142\141\156\137\167\170\x6c\x69\156\x6b\x73\x5f\x70\x6c\141\164\x66\157\x72\x6d", array("\165\x6e\151\141\x63\x69\x64" => $_W["\165\x6e\151\141\143\151\144"])); goto bazXh; xpSbZ: cAzwH: goto r4tH_; SUt7i: exit("\346\x97\xa0\346\225\210\xe7\232\x84\143\157\x64\x65"); goto xD5Ly; zsC8W: ronJD: goto BoXr3; uYGqY: goto zcwCf; goto MGMDD; q_em8: $custom = array("\x6d\x73\x67\x74\x79\x70\x65" => "\164\145\170\164", "\164\145\x78\x74" => array("\x63\157\156\x74\x65\156\164" => urlencode("\xe7\273\x91\xe5\xae\232\345\207\272\xe7\x8e\xb0\351\224\x99\xe8\257\257\xef\274\x8c\350\257\xb7\350\201\224\347\xb3\xbb\347\256\241\347\x90\x86\345\221\x98")), "\164\x6f\165\163\145\162" => $user["\x6f\x70\x65\156\151\x64"]); goto OujSS; cIG57: echo "\x3c\163\x63\162\x69\x70\x74\76\x64\157\x63\x75\155\145\x6e\x74\56\x61\144\144\105\166\145\156\x74\114\151\163\164\145\156\x65\x72\x28\47\x57\x65\x69\x78\151\x6e\112\123\102\162\x69\144\x67\x65\122\x65\x61\x64\x79\x27\x2c\x20\146\165\x6e\x63\x74\151\x6f\x6e\x28\x29\173\x20\x57\x65\x69\170\x69\x6e\x4a\x53\102\x72\x69\144\x67\x65\x2e\x63\141\154\x6c\x28\47\x63\154\157\163\x65\127\151\156\144\157\167\x27\x29\73\40\x7d\x2c\40\x66\141\x6c\163\145\x29\73\x57\145\151\x78\x69\x6e\x4a\x53\102\x72\x69\144\147\x65\x2e\143\x61\x6c\154\50\x27\x63\154\157\x73\145\x57\x69\156\x64\157\167\x27\x29\x3b\x3c\x2f\x73\x63\162\151\x70\x74\76"; goto ubQIZ; RjyTp: goto Xh4Y9; goto zsC8W; GDz8C: if ($wxapp = pdo_get("\142\x61\x69\x62\141\156\x5f\x77\x78\154\151\156\153\163\137\167\170\141\x70\160\163", array("\165\x6e\151\141\143\x69\144" => $_W["\165\x6e\x69\141\143\x69\x64"], "\141\x70\x70\151\x64" => $author["\x61\165\164\150\157\x72\151\x7a\x61\164\x69\157\156\x5f\151\156\146\157"]["\x61\165\164\150\x6f\162\x69\172\145\x72\137\x61\160\x70\151\144"]))) { goto ronJD; } goto hrugI; V9PEi: global $_GPC, $_W; goto hUV9B; xD5Ly: HR1yb: goto DdGp5; hrugI: $wxapp = array("\165\156\151\141\x63\x69\x64" => $_W["\x75\156\151\141\x63\151\x64"], "\165\x73\145\x72\x69\x64" => $user["\x69\x64"], "\x6e\141\x6d\145" => $info["\x61\x75\x74\x68\157\x72\x69\172\145\162\x5f\x69\x6e\146\157"]["\156\x69\143\x6b\x5f\x6e\x61\x6d\x65"], "\141\x70\x70\151\x64" => $author["\x61\165\164\x68\157\x72\151\172\x61\164\x69\x6f\156\x5f\x69\x6e\146\x6f"]["\141\165\164\150\x6f\162\151\x7a\145\x72\x5f\141\160\160\x69\x64"], "\x6f\x72\151\x64" => $info["\141\x75\x74\x68\157\162\151\172\145\x72\137\151\x6e\146\x6f"]["\x75\x73\x65\x72\x5f\156\141\x6d\145"], "\x61\165\164\x68\x6f\162\x69\172\145\162\x5f\141\143\x63\x65\163\163\137\164\157\153\145\x6e" => $author["\141\x75\x74\x68\157\162\151\x7a\x61\x74\151\x6f\x6e\x5f\151\x6e\x66\x6f"]["\141\165\164\150\x6f\162\151\172\145\x72\x5f\x61\143\143\145\163\x73\x5f\164\157\x6b\x65\156"], "\x61\x75\x74\150\x6f\x72\x69\172\x65\x72\x5f\162\145\146\x72\x65\163\x68\137\164\157\x6b\145\x6e" => $author["\141\x75\x74\x68\157\x72\x69\172\x61\x74\x69\x6f\156\x5f\x69\x6e\146\x6f"]["\141\165\164\150\157\x72\151\172\x65\x72\x5f\162\145\146\162\x65\163\150\x5f\164\x6f\153\x65\156"], "\x61\x75\164\150\x6f\162\x69\172\x65\x72\x5f\145\170\160\151\x72\x65\137\164\151\x6d\145" => time() + 6000, "\x63\x72\145\x61\164\x65\164\151\155\145" => time(), "\165\x70\x64\141\x74\145\x74\151\x6d\x65" => time()); goto fH60p; meFIA: $cb = sendWxappCustomNotice($custom); goto cIG57; vHah2: $author = $Platform->setAuthorizer($_GPC["\x61\165\164\150\137\x63\157\x64\145"]); goto NjTrc; OujSS: zcwCf: goto meFIA; TGeWm: rMcrq: goto bTN4E; JsZmb: $wxapp["\x69\144"] = pdo_insertid(); goto RjyTp; kFEtE: exit("\346\234\xaa\350\xae\xbe\347\275\xae\xe4\xb8\x80\xe9\x94\256\xe6\x8e\x88\346\x9d\203\345\x8f\x82\346\225\260"); goto fgXTN; UZRsY: $Platform = new Pf($platform); goto vHah2; gTM0i: if ($user) { goto rMcrq; } goto Qu_TY; MGMDD: v2E7q: goto q_em8; ezfzO: exit($author["\x6d\x65\x73\x73\141\x67\x65"]); goto xpSbZ; fH60p: $res = pdo_insert("\142\x61\x69\142\x61\156\137\x77\x78\x6c\x69\x6e\153\x73\x5f\x77\x78\141\160\x70\163", $wxapp); goto JsZmb; bazXh: if ($platform) { goto VItbW; } goto kFEtE; fgXTN: VItbW: goto vhiI3; VPDSB: if (!$wxapp["\151\x64"]) { goto v2E7q; } goto GoyEI; DdGp5: $user = pdo_get("\x62\x61\151\142\141\156\x5f\x77\x78\154\x69\x6e\x6b\x73\x5f\x75\163\x65\x72\x73", array("\x6f\160\145\x6e\151\144" => $_GPC["\x6f\160\x65\156\151\144"], "\143\x68\x61\156\x6e\x65\154" => "\345\xbe\256\344\xbf\xa1\xe5\xb0\217\347\xa8\x8b\345\272\x8f")); goto gTM0i; EQP75: exit("\xe5\274\200\346\224\276\xe5\271\xb3\345\217\260\345\xb0\232\346\234\252\xe7\224\x9f\346\x95\210\357\xbc\x8c\xe8\257\xb7\x31\x30\xe5\210\x86\xe9\x92\237\xe5\x90\x8e\xe5\x86\x8d\xe8\257\225"); goto ShNK3; F9qMc: Xh4Y9: goto VPDSB; hUV9B: if ($_GPC["\x61\x75\x74\x68\137\143\x6f\x64\145"]) { goto HR1yb; } goto SUt7i; BoXr3: pdo_update("\x62\x61\151\x62\x61\x6e\137\167\x78\154\151\x6e\153\163\x5f\x77\170\x61\x70\160\x73", array("\156\x61\x6d\145" => $info["\141\165\x74\150\157\x72\x69\x7a\145\162\137\151\x6e\146\x6f"]["\156\x69\143\x6b\137\156\x61\x6d\145"], "\x6f\162\x69\x64" => $info["\141\x75\164\150\157\x72\x69\172\145\162\x5f\151\156\146\157"]["\x75\163\145\x72\x5f\x6e\141\x6d\x65"], "\141\165\x74\150\x6f\162\x69\172\145\x72\137\141\x63\143\x65\x73\163\x5f\x74\x6f\x6b\x65\156" => $author["\x61\x75\x74\150\x6f\162\151\172\141\164\x69\x6f\156\x5f\151\156\x66\x6f"]["\x61\x75\x74\x68\x6f\162\x69\172\145\x72\137\x61\x63\x63\x65\x73\x73\x5f\164\157\x6b\x65\156"], "\x61\x75\x74\x68\x6f\x72\151\x7a\145\x72\x5f\x72\145\146\162\x65\163\150\137\x74\157\x6b\x65\156" => $author["\141\x75\164\x68\157\x72\x69\172\x61\x74\x69\x6f\x6e\x5f\151\x6e\x66\x6f"]["\x61\165\x74\150\x6f\162\x69\x7a\x65\162\137\162\145\146\162\x65\163\150\137\x74\157\x6b\145\x6e"], "\141\x75\164\150\x6f\162\x69\x7a\x65\x72\x5f\x65\x78\160\151\x72\145\137\164\151\155\145" => time() + 6000, "\165\x70\144\141\164\145\164\151\x6d\145" => time()), array("\165\x6e\151\x61\x63\x69\x64" => $_W["\165\x6e\x69\x61\143\151\x64"], "\141\160\160\x69\x64" => $author["\x61\x75\164\150\x6f\162\151\172\x61\x74\151\157\156\137\151\x6e\146\x6f"]["\141\x75\164\150\157\162\151\172\x65\162\137\x61\160\x70\x69\144"])); goto F9qMc; ShNK3: undX9: goto tnN0N; NjTrc: if (!is_error($author)) { goto cAzwH; } goto ezfzO; vhiI3: if ($platform["\143\x6f\155\x70\x6f\156\145\x6e\x74\137\166\145\x72\151\146\x79\x5f\x74\x69\x63\153\x65\164"]) { goto undX9; } goto EQP75; ubQIZ: } public function doUnilinkCreate() { goto t_79X; e_JFB: return $this->result(201, "\346\202\xa8\xe5\x88\233\345\xbb\xba\347\x9a\x84\xe5\x85\x8d\350\xb4\xb9\351\x93\276\346\216\xa5\346\x95\xb0\345\267\262\350\xbe\xbe\xe4\270\212\351\x99\x90\xef\xbc\214\xe8\257\xb7\xe8\264\xad\344\xb9\xb0\344\274\x9a\xe5\x91\x98\xe5\245\x97\xe9\244\x90"); goto UjzKg; FjrT3: $data["\141\160\160\137\x74\157\x70"] = $_GPC["\x61\x70\x70\x5f\164\157\x70"]; goto Dlhv_; WNYEP: $personal = json_decode($this->userinfo["\x63\x6f\x6e\x66\x69\x67"], true); goto Oe0I_; HQBUg: $link_expiretime = $this->userinfo["\x63\x72\145\141\x74\145\164\151\x6d\x65"] + $this->module["\x63\x6f\156\x66\x69\147"]["\x70\162\x65\155\151\x75\x6d\x73"]["\x66\x72\145\145\x65\170\x70\151\162\x65"] * 86400; goto i131M; ghR27: L5Kzh: goto EHeEW; gWUy2: if (!($this->userinfo["\x6c\151\x6e\x6b\x73"] >= $this->module["\143\157\156\146\x69\x67"]["\x70\x72\145\155\151\165\155\x73"]["\146\162\145\x65\154\x69\155\151\x74"])) { goto X2JvL; } goto e_JFB; b1yuF: pnrQ3: goto V17jP; MnQwn: $data["\164\x79\x70\145"] = $this->_gpc("\x74\x79\160\145"); goto FjrT3; b2bN9: bQUZG: goto mFTNE; VR2Z_: if (in_array($data["\164\x79\160\x65"], array("\xe5\205\254\344\xbc\227\345\217\xb7\xe6\x96\x87\xe7\253\240", "\344\273\xbb\346\x84\x8f\xe9\223\276\xe6\x8e\xa5"))) { goto u113J; } goto EgcyK; bEkRF: $account_api = WeAccount::create(); goto wmyA3; LfrYK: pdo_update("\142\141\x69\x62\141\x6e\x5f\x77\170\154\x69\156\x6b\163\137\154\x69\x6e\153\163", array("\157\160\145\156\x6c\x69\x6e\153" => $openlink, "\x70\141\164\150" => $path, "\161\x75\145\162\171" => "\154\151\x6e\x6b\x69\144\x3d" . $linkid), array("\x69\144" => $linkid)); goto PmRQ6; Y7wee: return $this->result(202, "\346\x82\250\345\210\233\345\xbb\xba\xe7\232\x84\351\x93\xbe\346\216\xa5\xe6\x95\xb0\xe5\xb7\xb2\350\276\276\344\xb8\x8a\xe9\231\x90"); goto nCV0D; EgcyK: $path = "\57\x70\x61\147\145\163\57\151\x6e\x64\x65\x78\57\x75\156\x69\x6c\151\x6e\x6b"; goto HjfJu; hu9Ic: pdo_update("\x62\141\x69\x62\141\x6e\x5f\167\170\x6c\151\x6e\x6b\x73\x5f\154\151\x6e\x6b\x73", $data, array("\x69\x64" => $id, "\x75\x6e\151\x61\143\151\144" => $_W["\165\156\x69\141\x63\151\x64"], "\165\163\145\162\151\144" => $this->userinfo["\151\144"])); goto xrCzV; Ch829: $data["\x75\x73\145\162\x69\144"] = $this->userinfo["\x69\x64"]; goto EJnOn; oR5xG: $data = array(); goto S8VUB; wcqmh: $data["\144\157\x6d\x61\x69\x6e"] = $this->module["\x63\157\156\146\151\147"]["\x76\151\x70\x64\x6f\x6d\141\x69\156"]; goto b2bN9; mgJT8: $data["\142\164\x6e\x5f\164\151\x74\x6c\145"] = trim($_GPC["\142\164\156\137\x74\151\164\x6c\x65"]); goto hFU6R; IeD7n: $sensitive_result = sensitiveText(implode('', $data)); goto sZtx4; ds1Fc: IqifG: goto sWh_P; sG8zs: $data["\145\170\160\x69\x72\x65\x74\151\155\x65"] = $link_expiretime; goto VOMN1; GvAKM: $openlink = create_wxacode($access_token, $path, "\154\151\156\x6b\x69\x64\x3d" . $linkid); goto ehGvD; x5Mv0: u113J: goto S_2AB; acpk4: goto G2AVe; goto BGQcc; EJnOn: $data["\x63\162\145\x61\x74\145\x74\x69\155\145"] = $data["\165\x70\x64\141\x74\145\164\151\155\145"] = $now; goto sG8zs; gcEJ7: pdo_delete("\142\x61\151\x62\x61\156\x5f\167\x78\x6c\151\156\x6b\163\137\x6c\x69\156\153\163", array("\x69\144" => $linkid)); goto FQw_2; rey5X: $personal = array(); goto b1yuF; spVj1: XzjKX: goto GIIXV; zyeDy: goto LD8P4; goto rl2Po; USCAx: return $this->result(100, "\xe9\223\xbe\xe6\216\245\xe5\x88\x9b\xe5\xbb\272\xe5\244\261\xe8\xb4\245"); goto zyeDy; S_2AB: $path = "\57\160\141\x67\x65\x73\x2f\x69\x6e\x64\145\170\57\167\x65\142\x70\x61\x67\145"; goto qZ10W; wmyA3: $access_token = $account_api->getAccessToken(); goto VR2Z_; iiXoP: M6i1m: goto MnQwn; S3oc0: $data["\x72\x65\x74\x75\x72\156"] = $this->_gpc("\x72\145\164\165\162\156"); goto hLy_o; i131M: G2AVe: goto kp7Tp; UjAmM: goto G2AVe; goto sUwHz; nCV0D: rL5pJ: goto UjAmM; ehGvD: if (!is_error($openlink)) { goto XzjKX; } goto gcEJ7; Pz3aw: $linkid = pdo_insertid(); goto bEkRF; V17jP: if (($link_expiretime = $this->userinfo["\145\170\160\151\x72\145\x74\x69\x6d\x65"]) > $now) { goto oPS8B; } goto rLHJY; hLy_o: $data["\x73\150\x61\162\145\137\164\151\x74\154\x65"] = trim($_GPC["\163\x68\x61\x72\x65\x5f\x74\151\x74\154\x65"]); goto mgJT8; FLueA: goto L5Kzh; goto CL9AX; rl2Po: Xk8Bl: goto Pz3aw; rLHJY: if ($this->userinfo["\x63\162\x65\141\x74\145\164\151\155\145"] + $this->module["\143\157\156\x66\151\x67"]["\x70\162\145\155\151\x75\x6d\x73"]["\146\x72\x65\145\x64\x61\171\163"] * 86400 > $now) { goto OWwLh; } goto tgBXU; xrCzV: return $this->result(0, "\xe9\223\276\346\x8e\xa5\344\277\xae\xe6\224\271\xe6\210\x90\xe5\x8a\237"); goto ghR27; pzeSa: if (!(buyCheck("\x73\145\x6e\x73\x69\164\x69\x76\145") && !empty($this->module["\x63\157\x6e\x66\x69\147"]["\163\145\156\163\x69\x74\x69\166\x65"]["\x74\145\170\164"]))) { goto M6i1m; } goto IeD7n; DTgba: $now = time(); goto W0agv; Hz38A: return $this->result(302, $sensitive_result["\155\145\x73\x73\141\147\x65"]); goto gJyJP; CL9AX: O7OgA: goto fhWaR; YOW5j: $data["\143\157\160\x79\x5f\x77\x6f\x72\144\163"] = trim($_GET["\x63\x6f\x70\x79\137\x77\x6f\162\x64\x73"]); goto pzeSa; hFU6R: $data["\141\160\160\x5f\x74\x65\170\x74"] = trim($_GPC["\x61\x70\160\x5f\x74\145\170\x74"]); goto YOW5j; sZtx4: if (!is_error($sensitive_result)) { goto RW3Zy; } goto Hz38A; BGQcc: oPS8B: goto pBxaw; mFTNE: if (!$personal["\144\157\x6d\x61\x69\156"]) { goto IqifG; } goto nA5ji; VOMN1: $result = pdo_insert("\x62\141\x69\142\141\x6e\x5f\167\x78\154\x69\156\x6b\163\137\x6c\x69\156\153\163", $data); goto TLxvD; fhWaR: $data["\x75\160\144\x61\164\x65\x74\x69\x6d\145"] = $now; goto hu9Ic; gJyJP: RW3Zy: goto iiXoP; HjfJu: goto tbmfV; goto x5Mv0; PmRQ6: return $this->result(0, "\351\223\xbe\xe6\x8e\xa5\345\210\x9b\xe5\273\272\346\210\x90\345\x8a\x9f", ["\x6c\x69\x6e\x6b\x69\144" => $linkid]); goto BZm_2; Dlhv_: $data["\x6d\145\163\x73\141\147\x65\137\151\x6d\147"] = $_GPC["\155\145\x73\163\141\147\x65\x5f\151\x6d\147"]; goto qo74q; BZm_2: LD8P4: goto FLueA; pBxaw: if (!$this->module["\143\x6f\x6e\146\x69\147"]["\166\x69\x70\x64\157\155\141\151\x6e"]) { goto bQUZG; } goto wcqmh; sWh_P: if (!($this->module["\143\x6f\156\146\x69\x67"]["\x70\x72\x65\155\151\x75\155\x73"]["\x76\151\160\154\151\x6d\x69\x74"] && $this->userinfo["\154\151\x6e\153\x73"] >= $this->module["\x63\x6f\156\146\x69\147"]["\160\x72\x65\x6d\151\165\x6d\163"]["\166\x69\x70\x6c\151\155\x69\x74"])) { goto rL5pJ; } goto Y7wee; qo74q: $data["\144\x6f\155\141\151\156"] = $this->module["\143\x6f\x6e\146\151\x67"]["\144\x6f\x6d\x61\151\156"]; goto DTgba; TLxvD: if ($result) { goto Xk8Bl; } goto USCAx; Oe0I_: if (!empty($personal)) { goto pnrQ3; } goto rey5X; GIIXV: pdo_update("\x62\141\151\142\141\x6e\x5f\x77\170\x6c\x69\156\153\163\x5f\165\163\145\162\163", array("\x6c\151\156\153\163\x20\53\75" => 1), array("\151\x64" => $this->userinfo["\151\x64"])); goto LfrYK; nA5ji: $data["\x64\157\155\141\151\x6e"] = $personal["\x64\x6f\155\141\151\156"]; goto ds1Fc; sUwHz: OWwLh: goto gWUy2; W0agv: $link_expiretime = 0; goto WNYEP; kp7Tp: if ($id = intval($_GPC["\x69\x64"])) { goto O7OgA; } goto CHzjP; CHzjP: $data["\165\x6e\x69\141\x63\x69\x64"] = $_W["\x75\x6e\x69\141\x63\151\144"]; goto Ch829; S8VUB: $data["\156\x61\x6d\x65"] = $this->_gpc("\156\141\155\145"); goto S3oc0; t_79X: global $_GPC, $_W; goto oR5xG; FQw_2: return $this->result($openlink["\x65\162\x72\156\x6f"], $openlink["\155\145\x73\163\141\x67\x65"]); goto spVj1; UjzKg: X2JvL: goto HQBUg; tgBXU: return $this->result(200, "\xe6\x82\xa8\xe7\x9a\x84\344\xbd\x93\351\xaa\x8c\xe6\234\237\345\267\262\xe8\xbf\207\357\274\214\350\xaf\267\xe8\xb4\255\344\xb9\260\xe4\xbc\232\xe5\221\x98\xe5\xa5\x97\351\244\x90"); goto acpk4; qZ10W: tbmfV: goto GvAKM; EHeEW: } public function doUpload() { goto oYpgI; ciQUm: if (!(buyCheck("\163\145\x6e\x73\x69\164\151\166\145") && !empty($this->module["\143\x6f\x6e\x66\151\x67"]["\163\x65\x6e\x73\151\x74\151\x76\x65"]["\x69\155\x67"]))) { goto FJvmq; } goto Z1k9b; Z1k9b: $sensitive_result = sensitiveImg(ATTACHMENT_ROOT . $file["\x70\141\164\x68"]); goto uJIDP; Fof5t: die(json_encode($result, 256)); goto Ui3nd; RLmZ8: exit; goto wUpfc; zyNkJ: $file = file_upload($_FILES["\x66\151\154\145"]); goto CLkt1; uJIDP: if (!is_error($sensitive_result)) { goto GHrAE; } goto xkB5b; wUpfc: GHrAE: goto H_Esv; VsVjK: echo json_encode($file, 256); goto ncH0b; xkB5b: echo json_encode(array("\163\165\143\x63\145\x73\163" => false, "\x6d\145\x73\x73\x61\147\145" => $sensitive_result["\x6d\145\163\x73\141\147\x65"]), 256); goto RLmZ8; bOpVn: load()->func("\x66\151\154\145"); goto zyNkJ; oYpgI: global $_GPC, $_W; goto bOpVn; Ui3nd: uZK9U: goto ciQUm; H_Esv: FJvmq: goto fCknN; QdATW: $result["\145\x72\162\157\x72"]["\155\x65\163\163\141\x67\x65"] = $file["\x6d\145\x73\x73\141\147\x65"]; goto Fof5t; CLkt1: if (!is_error($file)) { goto uZK9U; } goto QdATW; fCknN: $file["\x75\x72\154"] = $_W["\141\x74\x74\141\143\150\x75\x72\x6c\137\x6c\x6f\143\x61\x6c"]; goto VsVjK; ncH0b: } }